<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>小米浏览器去广告、隐私保护增强</title>
    <url>/posts/b788c5ea.html</url>
    <content><![CDATA[<img width="500" data-src="https://i.loli.net/2019/10/16/jronISYk9gXcUxN.jpg"><a id="more"></a> 一直以来我都是把自带浏览器删除用 via 替换的，但 MIUI 在某个版本升级后如果卸载了自带浏览器会导致快应用闪退，刚好 MIUI 浏览器更新了简洁模式界面还不错，就决定用回自带浏览器了。<p>当然即便是启用简洁模式也还是有很多不好的地方，比如菜单栏的广告、搜索栏热点推荐、无法自定义搜索引擎等等。习惯性去数据目录看看，发现了对应的配置文件，既然是需要从本地读取那就好办了，直接把文件内容清空去掉读写权限，设置不可更该属性就好。</p><p>MIUI 浏览器的去广告功能还是很强的，规则文件存储在<code>/data/data/com.android.browser/files/data/adblock/</code>目录下，其中<code>miui_blacklist.json</code>就是规则文件了，打开看可以看到存储规则是这样的</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    'effectiveTime': int(time.time() * 1000),</span><br><span class="line">    'flag': 0,</span><br><span class="line">    'id': id,</span><br><span class="line">    'network': 255,</span><br><span class="line">    'rule': line,</span><br><span class="line">    'updatetime': int(time.time() * 1000)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>其中最重要的就是 rule 项，由于文件过大，内容还都是压缩的，我就没仔细看了，直接试着将 PC 上的去广告规则添加进去，经测试是有效的，所以最终有了这篇文章。</p><p>既然知道可以使用 PC 上的 ABP 规则，那么接下来就是将 ABP 的规则添加到 MIUI 自带规则中去，这里我选择使用 Python 来处理。从前面我们知道了一条规则的内容，接下来就很好办了，先将自带的规则导入，然后遍历 ABP 规则，把除头部及注释的内容，按上面的格式拼接，其中 effectiveTime 和 updatetime 均为距 1970 年的秒数（自带规则里这两个的值是不一样的，这里为了方便使用同一个值），使用 time 模块的 time 获取毫秒数将其乘以 1000 取整即可，然后 append 到自带规则中即可，最后再 dump 到文件中。至此就大功告成了。</p><p>另外还有个白名单文件，建议把它清空。</p><p>代码：</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line">default = json.load(open(<span class="string">'miui_blacklist.json'</span>, <span class="string">'r'</span>))</span><br><span class="line">urls = (<span class="string">'https://easylist-downloads.adblockplus.org/easylistchina.txt'</span>,</span><br><span class="line">        <span class="string">'https://easylist-downloads.adblockplus.org/easyprivacy.txt'</span>,</span><br><span class="line">        <span class="string">'https://easylist-downloads.adblockplus.org/easylist.txt'</span>,</span><br><span class="line">        <span class="string">'https://raw.githubusercontent.com/xinggsf/Adblock-Plus-Rule/master/ABP-FX.txt'</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">i = len(default[<span class="string">'data'</span>])</span><br><span class="line">id = []</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> default[<span class="string">'data'</span>]:</span><br><span class="line">    id.append(j[<span class="string">'id'</span>])</span><br><span class="line">id = max(id)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    filename = url.split(<span class="string">'/'</span>)[<span class="number">-1</span>]</span><br><span class="line">    req = request.Request(url)</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            res = request.urlopen(req).read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">            <span class="keyword">if</span>(res):</span><br><span class="line">                print(<span class="string">"正在添加 %s"</span> % filename)</span><br><span class="line">                <span class="keyword">for</span> line <span class="keyword">in</span> res.split(<span class="string">'\n'</span>):</span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">not</span> (line.startswith(<span class="string">'['</span>) <span class="keyword">or</span> line.startswith(<span class="string">'!'</span>))):</span><br><span class="line">                        data = {</span><br><span class="line">                            <span class="string">'effectiveTime'</span>: int(time.time() * <span class="number">1000</span>),</span><br><span class="line">                            <span class="string">'flag'</span>: <span class="number">0</span>,</span><br><span class="line">                            <span class="string">'id'</span>: id,</span><br><span class="line">                            <span class="string">'network'</span>: <span class="number">255</span>,</span><br><span class="line">                            <span class="string">'rule'</span>: line,</span><br><span class="line">                            <span class="string">'updatetime'</span>: int(time.time() * <span class="number">1000</span>)</span><br><span class="line">                        }</span><br><span class="line">                        default[<span class="string">'data'</span>].append(data)</span><br><span class="line">                        i += <span class="number">1</span></span><br><span class="line">                        id += <span class="number">1</span></span><br><span class="line">                print(<span class="string">"%s 添加完成"</span> % filename)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">            print(err)</span><br><span class="line">            print(<span class="string">'sleep 3s'</span>)</span><br><span class="line">            time.sleep(<span class="number">3</span>)</span><br><span class="line">json.dump(default, open(<span class="string">'miui_blacklist_opt.json'</span>, <span class="string">'w'</span>))</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>MIUI</tag>
      </tags>
  </entry>
  <entry>
    <title>湖南工业大学电费查询</title>
    <url>/posts/328206c9.html</url>
    <content><![CDATA[<p><a href="https://sm.ms/image/tDgNBEq7ZkGxnc5" target="_blank" rel="external nofollow noopener noreferrer"><img width="500" data-src="https://i.loli.net/2019/09/22/tDgNBEq7ZkGxnc5.jpg"></a><br>接口均为从完美校园抓包得出，理论上适用于其它也接入了完美校园的学校。</p><a id="more"></a><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p><a href="http://106.15.194.74:99/df?xh=河西&amp;ld=25&amp;qs=117" target="_blank" rel="external nofollow noopener noreferrer">http://106.15.194.74:99/df?xh=河西&amp;ld=25&amp;qs=117</a><br>xh：校区，可选值为 <code>河东</code>、<code>河西</code><br>ld：楼栋<br>qs：寝室号</p><h2 id="getJzinfo"><a href="#getJzinfo" class="headerlink" title="getJzinfo"></a>getJzinfo</h2><p><code>http://h5cloud.17wanxiao.com:8080/CloudPayment/user/getRoom.do?payProId=#支付订单ID#&amp;schoolcode=#学校代码#&amp;optype=#状态码#&amp;areaid=#校区ID#&amp;buildid=#楼栋ID#&amp;unitid=#单元ID#&amp;levelid=#等级ID#&amp;businesstype=#业务类型#</code></p><p>以下查询中不变的值：<br><code>payProId</code> 随机生成一个整数即可<br><code>schoolcode</code> 为学校代码，请自行查询<br><code>businesstype=2</code></p><h3 id="获取校区信息"><a href="#获取校区信息" class="headerlink" title="获取校区信息"></a>获取校区信息</h3><blockquote><p>optype=1<br>arieaid=0<br>buildid=0<br>unitid=0<br>levelid=0</p></blockquote><h3 id="获取楼栋信息"><a href="#获取楼栋信息" class="headerlink" title="获取楼栋信息"></a>获取楼栋信息</h3><blockquote><p>optype=2<br>areaid=#从前面获取到的校区信息中查找#<br>buildid=0<br>unitid=0<br>levelid=0</p></blockquote><h3 id="获取寝室信息"><a href="#获取寝室信息" class="headerlink" title="获取寝室信息"></a>获取寝室信息</h3><blockquote><p>optype=4<br>areaid=#从前面获取到的校区信息中查找#<br>buildid=#从前面获取到的楼栋信息中查找#<br>unitid=0<br>levelid=-1</p></blockquote><h2 id="查询电费"><a href="#查询电费" class="headerlink" title="查询电费"></a>查询电费</h2><p><code>http://h5cloud.17wanxiao.com:8080/CloudPayment/user/getRoomState.do?payProId=#订单ID#&amp;schoolcode=#学校ID#&amp;businesstype=#业务类型#&amp;roomverify=#寝室编号#</code></p><blockquote><p>payProId 随机生成一个整数即可<br>schoolcode 为学校代码，请自行查询<br>businesstype=2<br>roomverify #从前面获取到的寝室信息中查找#</p></blockquote><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <tags>
        <tag>HUT</tag>
      </tags>
  </entry>
  <entry>
    <title>HUT_QZAPI</title>
    <url>/posts/d1e775bf.html</url>
    <content><![CDATA[<p>HUT 强智教务系统 API</p><p>地址 <a href="https://github.com/cxyzzz/HUT_QIANZHI_API" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/cxyzzz/HUT_QIANZHI_API</a><br>参考 <a href="https://github.com/TLingC/QZAPI" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/TLingC/QZAPI</a></p><a id="more"></a><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p><a href="http://106.15.194.74:99" target="_blank" rel="external nofollow noopener noreferrer">http://106.15.194.74:99</a></p><h2 id="API列表"><a href="#API列表" class="headerlink" title="API列表"></a>API列表</h2><h3 id="authUser"><a href="#authUser" class="headerlink" title="authUser"></a>authUser</h3><p>登录帐号<br><code>http://218.75.197.123:83/app.do?method=authUser&amp;xh=学号&amp;pwd=密码</code></p><p><strong>返回值</strong><br>返回 JSON 对象</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    'success': 登录状态,</span><br><span class="line">    'token': 'Token',</span><br><span class="line">    'user':{</span><br><span class="line">        'scsj': 未知,</span><br><span class="line">        'sjyzm': 未知,</span><br><span class="line">        'useraccount': '登录用户',</span><br><span class="line">        'usertype': '用户类型，学生为 2',</span><br><span class="line">        'userdwmc': '学院',</span><br><span class="line">        'username': '用户姓名',</span><br><span class="line">        'userpasswd': '用户密码'</span><br><span class="line">        },</span><br><span class="line">    'userdwmc': '学院',</span><br><span class="line">    'userrealname': '用户姓名',</span><br><span class="line">    'usertype': '用户类型，学生为 2'</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>之后的查询均需携带 Token</p><h3 id="getStudentIdInfo"><a href="#getStudentIdInfo" class="headerlink" title="getStudentIdInfo"></a>getStudentIdInfo</h3><p><del>获取学号信息(已禁止查询)<br><code>http://218.75.197.123:83/app.do?method=getStudentIdInfo&amp;xh=#学号#</code></del></p><p><strong>返回值</strong><br>返回 JSON 对象</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    'bjid'：'未知',</span><br><span class="line">    'ndzyid'：'未知',</span><br><span class="line">    'yxid'：'未知',</span><br><span class="line">    'xxdm'：'未知'</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="getCurrentTime"><a href="#getCurrentTime" class="headerlink" title="getCurrentTime"></a>getCurrentTime</h3><p>获取当前时间、周次、学年等信息<br><code>http://218.75.197.123:83/app.do?method=getCurrentTime&amp;currDate=#查询日期#</code></p><p><strong>返回值</strong><br>返回 JSON 对象</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    'e_time': '周结束时间',</span><br><span class="line">    's_time': '周开始时间',</span><br><span class="line">    'xnxqh': '学年',</span><br><span class="line">    'zc': '周次'</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="getKbcxAzc"><a href="#getKbcxAzc" class="headerlink" title="getKbcxAzc"></a>getKbcxAzc</h3><p>获取课程表<br><code>http://218.75.197.123:83/app.do?method=getKbcxAzc&amp;xh=#学号#&amp;xnxqid=#学年#&amp;zc=#周次#</code></p><p><strong>返回值</strong><br>返回JSON数组</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        'jsmc': '教室名称',</span><br><span class="line">        'jssj': '下课时间',</span><br><span class="line">        'jsxm': '教师姓名',</span><br><span class="line">        'kcmc': '课程名称',</span><br><span class="line">        'kkzc': '课程教学周',</span><br><span class="line">        'kcsj': '课程时间（eg: 50304 表示星期五第3-4节）',</span><br><span class="line">        'kssj': '上课时间',</span><br><span class="line">        'sjbz': '未知'</span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><h3 id="getXqcx"><a href="#getXqcx" class="headerlink" title="getXqcx"></a>getXqcx</h3><p>获取校区<br><code>http://218.75.197.123:83/app.do?method=getXqcx</code></p><p><strong>返回值</strong><br>返回JSON数组</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        'xqid': '1',</span><br><span class="line">        'xqmc': '河东校区'</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        'xqid': '2',</span><br><span class="line">        'xqmc': '河西校区'</span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><h3 id="getJxlcx"><a href="#getJxlcx" class="headerlink" title="getJxlcx"></a>getJxlcx</h3><p>获取校区教学楼信息<br><code>http://218.75.197.123:83/app.do?method=getJxlcx&amp;xqid=#校区ID#</code></p><p><strong>返回值</strong><br>返回JSON数组</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        'jzwid': '教学楼 ID',</span><br><span class="line">        'jzwmc': '教学楼名称'</span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><h3 id="getKxJscx"><a href="#getKxJscx" class="headerlink" title="getKxJscx"></a>getKxJscx</h3><p>获取空教室<br><code>http://218.75.197.123:83/app.do?method=getKxJscx&amp;time=#查询日期#&amp;idleTime=#见下方说明#&amp;xqid=#校区ID#&amp;jxlid=#教学楼ID#&amp;classroomNumber=_#可容纳人数，见下方说明#</code></p><p>xqid(校区 ID)、jxlid(教学楼 ID)、classroomNumber(教室容纳人数)是可选参数</p><p><strong>idleTime取值</strong></p><blockquote><p>allday：全天<br>am：上午<br>pm：下午<br>night：晚上</p></blockquote><p><strong>classroomNumber</strong></p><blockquote><p>30：30人以下<br>30-40：30-40人<br>40-50：40-50人<br>60：60人以上</p></blockquote><p><strong>返回值</strong><br>返回JSON数组</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    'data': [</span><br><span class="line">        {</span><br><span class="line">            'jsList': [</span><br><span class="line">                {</span><br><span class="line">                    'jsh': '未知',</span><br><span class="line">                    'jsid': '教室 ID',</span><br><span class="line">                    'jsmc': '教室名称',</span><br><span class="line">                    'jzwid': '所在楼ID',</span><br><span class="line">                    'jzwmc': '教学楼名称',</span><br><span class="line">                    'xqmc': '校区名称',</span><br><span class="line">                    'yxzws': 教室容量,</span><br><span class="line">                    'zws': 未知，和yxzws相同</span><br><span class="line">                }</span><br><span class="line">            ],</span><br><span class="line">            'jxl': '教学楼'</span><br><span class="line">        }</span><br><span class="line">    ],</span><br><span class="line">    'success': 状态,</span><br><span class="line">    'xnxqid': '学年'</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="getUserInfo"><a href="#getUserInfo" class="headerlink" title="getUserInfo"></a>getUserInfo</h3><p>获取帐号信息<br><code>http://218.75.197.123:83/app.do?method=getUserInfo&amp;xh=#学号#</code></p><p>ps: 学号可以是其他人的</p><p><strong>返回值</strong><br>返回 JSON 对象</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    'bj': '班级',</span><br><span class="line">    'dh': '电话',</span><br><span class="line">    'dqszj': '未知，与入学年份、年级相同',</span><br><span class="line">    'email': '电子邮箱',</span><br><span class="line">    'fxzy': '辅修专业',</span><br><span class="line">    'ksh': '高考考号',</span><br><span class="line">    'nj': '年级',</span><br><span class="line">    'qq': 'QQ 号',</span><br><span class="line">    'rxnf': '入学年份',</span><br><span class="line">    'usertype': '用户类别，学生为 2',</span><br><span class="line">    'xb': '性别',</span><br><span class="line">    'xh': '学号',</span><br><span class="line">    'xm': '姓名',</span><br><span class="line">    'xz': 未知,</span><br><span class="line">    'yxmc'：'院系名称',</span><br><span class="line">    'zymc'：'专业名称'</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h3 id="getXnxq"><a href="#getXnxq" class="headerlink" title="getXnxq"></a>getXnxq</h3><p>获取学年和学期信息<br><code>http://218.75.197.123:83/app.do?method=getXnxq&amp;xh=#学号#</code></p><p><strong>返回值</strong><br>返回JSON数组</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        'isdqxq': '是否为当前学期，1 为是，0 为否',</span><br><span class="line">        'xnxq01id': '学年id',</span><br><span class="line">        'xqmc': '学年名称'</span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><h3 id="getCjcx"><a href="#getCjcx" class="headerlink" title="getCjcx"></a>getCjcx</h3><p>获取成绩信息<br><code>http://218.75.197.123:83/app.do?method=getCjcx&amp;xh=#学号#&amp;xnxqid=#学期学年ID#</code></p><p>ps: 此处学号可以是其他人的</p><p><strong>返回值</strong><br>返回 JSON 数组</p><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    'result': [</span><br><span class="line">        {</span><br><span class="line">            'bz': 未知,</span><br><span class="line">            'cjbsmc': 未知,</span><br><span class="line">            'kclbmc': '课程类别名称',</span><br><span class="line">            'kcmc': '课程名称',</span><br><span class="line">            'kcxzmc': '课程性质名称',</span><br><span class="line">            'kcywmc': 未知,</span><br><span class="line">            'ksxzmc': '考试性质名称',</span><br><span class="line">            'xf': 学分,</span><br><span class="line">            'xm': '姓名',</span><br><span class="line">            'xqmc': '学期名称',</span><br><span class="line">            'zcj': '总成绩'</span><br><span class="line">        }</span><br><span class="line">    ]，</span><br><span class="line">    'success': 状态</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="getKscx"><a href="#getKscx" class="headerlink" title="getKscx"></a>getKscx</h3><p>获取考试信息<br><code>http://218.75.197.123:83/app.do?method=getKscx&amp;xh=#学号#</code></p><p><strong>返回值</strong><br>条件所限，尚未明晰</p><h3 id="getEarlyWarnInfo"><a href="#getEarlyWarnInfo" class="headerlink" title="getEarlyWarnInfo"></a>getEarlyWarnInfo</h3><p>获取学籍预警信息<br><code>http://218.75.197.123:83/app.do?method=getEarlyWarnInfo&amp;xh=#学号#&amp;history=#见下方说明#</code></p><p><strong>history取值</strong></p><blockquote><p>0：当前预警<br>1：历史预警</p></blockquote><p><strong>返回值</strong><br>条件所限，尚未明晰</p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><ol><li><p>支持导出课表为 ics 日历文件</p></li><li><p>WEB 展示(不会前端，使用博客为模板写了课表展示，暂未完善)<br><img alt="Screenshot_20190910_212948.png" data-src="https://i.loli.net/2019/09/10/Ns3qxcToGBQblIv.png"></p></li></ol><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <tags>
        <tag>HUT</tag>
      </tags>
  </entry>
  <entry>
    <title>Android 使用 Rclone 挂载网盘</title>
    <url>/posts/2a60e472.html</url>
    <content><![CDATA[<img width="500" data-src="https://cdn.jsdelivr.net/gh/cxyzzz/CDN@19.09.02/images/posts/HiShoot_20190902_152747.webp"><a id="more"></a><details><summary>点击显示更新信息</summary><div class="note success"><h3 id="2019-08-09-更新"><a href="#2019-08-09-更新" class="headerlink" title="2019.08.09 更新"></a>2019.08.09 更新</h3><p>版本 v1.7.b</p><ol><li>添加网络检测开关，默认启用，可在<code>.global.param</code>文件中添加<code>NETCHK=0</code>关闭</li><li>修复当某一 remote 启用绑定到 sdcard 时在其后面的所有 remote 默认启用绑定到 sdcard 的 bug</li></ol><h3 id="2019-08-08-更新"><a href="#2019-08-08-更新" class="headerlink" title="2019.08.08 更新"></a>2019.08.08 更新</h3><p>版本 v1.7a</p><ol><li>修复了 custom_param 不生效的问题</li><li>添加了更多可自定义的默认参数</li><li>可以在<code>.*.param</code>中添加<code>HTTP=0</code>,<code>FTP=0</code>禁用 HTTP 和 FTP</li><li>更改启用绑定到 sdcard 的方式，在<code>.*.param</code>文件中添加<code>BINDSD=1</code>启用，以前版本的添加 .bindsd 文件失效</li><li>更改<code>BINDPOINT=</code>为<code>SDBINDPOINT=</code>，默认为/sdcard/Cloud/$REMOTE,要更改可在<code>.*.param</code>文件中添加<code>SDBINDPOINT=xx</code>,xx为要绑定的 /sdcard 下的目录名（直接填目录名，不需要路径）</li></ol><h3 id="2019-08-02-更新"><a href="#2019-08-02-更新" class="headerlink" title="2019.08.02 更新"></a>2019.08.02 更新</h3><p>作者更新了两个版本，v1.5 支持绑定到 /sdcard/cloud/ 了，在配置目录创建 <code>.bindsd</code> 文件启用，另外加入了网络检测，检测地址为 google.com ，需自行解决网络问题。v1.6 (当前版本) <code>.*.parame</code> 配置文件中增加了<code>ADD_PARAMS</code>和<code>REPLACE_PARAMS</code>用于添加和替换 rclone 挂载参数； 添加了一个 <code>.blobal.param</code> 配置文件用于修改全局参数，README 中只写了 <code>NETCHK_ADDR</code>和<code>BINDPOINT</code>用于修改网络检测地址和挂载点，还可以添加其他的值，但目前并不是很完善，部分默认参数无法修改。</p></div></details><div class="note info"><h3 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h3><ol><li>使用模块前建议先仔细阅读模块说明（README），这个模块并不是装上就能用的。</li><li>所有 param 文件中最后必须空一行，不然无法识别最后一行的内容。</li></ol></div><p>先来两张效果图：</p><details><summary>点击显示图片</summary><p><img alt="Screenshot_2019-07-16-20-25-42-875_bin.mt.plus.png" data-src="https://i.loli.net/2019/07/16/5d2dc2896ef0e90595.png"></p><p><img alt="Screenshot_2019-07-16-20-14-53-809_com.termux.png" data-src="https://i.loli.net/2019/07/16/5d2dc289cbdc671568.png"></p></details><p>　　不久前了解到了 <a href="https://rclone.org/" target="_blank" rel="external nofollow noopener noreferrer">rclone</a> 这个东西，rclone 是一个支持在多个网盘及存储服务同步文件和文件夹的命令行程序，使用 GO 语言编写。支持的服务列表可以在官网查看，像微软的 Onedrive 、谷歌的 GDrive 、阿里云对象存储以及支持 FTP、webdav 等协议的存储服务都支持，基本上覆盖了常见的存储服务提供商。使用 rclone 可以很方便的进行管理。<br>　　当然今天要说的是 rclone 的挂载功能，rclone 可以将网盘挂载到本地当做磁盘使用。rclone 挂载需要 fusermount 这个程序，在 PC 端很简单，一条命令就安装好了，但在手机端需要自行编译arm 架构的。我在网上找到个能用的 fusermount ，挂载成功了，但只能运行挂载命令的程序才可以访问，这样没有很大意义，后面就放弃了。最近 magisk 仓库更新了个 <a href="https://github.com/Magisk-Modules-Repo/com.piyushgarg.rclone" target="_blank" rel="external nofollow noopener noreferrer">rclone-mount</a> 模块，将 rclone、fusermount都提供了，并且写好了挂载脚本，作者解释了只能运行挂载命令的程序才能访问的原因。<br>　　使用模块需要先安装 magisk，并且由于 Android 系统限制，必须使用 root 权限才能挂载。magisk 安装这里就不多说了，我另一篇文章有介绍。因为模块目前有个 bug 如果没有找到 rclone.conf 文件模块在刷入时会卡住，如果是之前没用过 rclone 的需要先去创建 /sdcard/.rclone/rclone.conf 文件，这样就不会卡在模块安装界面了。安装完模块后接下来是配置 rclone，rclone 用法百度有很多教程，这里我简单说下。<br>　　首先要有一个 rclone 支持的网盘，比如 Onedrive，由于需要运行命令，所以需要用到终端，这里我用的是 Termux（推荐），使用其它终端也可以。<br>　　先运行 su 获取 root 权限，然后运行 <code>export XDG_CONFIG_HOME=/data/media/0</code> 设置 rclone 配置目录，以免找不到配置文件或者无权限。 <code>/data/adb/modules/com.piyushgarg.rclone/rclone config</code> 会显示当前已配置好的，我的之前已经添加了三个。</p><details><summary>点击显示图片</summary><p><img alt="Screenshot_2019-07-16-21-14-11-051_com.topjohnwu.magisk.png" data-src="https://i.loli.net/2019/07/16/5d2dce17eddb599440.png"></p></details><p>输入 n 回车创建一个新的远程地址，提示输入名字，这个可以随便取一个方便记住的名字，后面使用的时候就是用的这个名字，之后选择远程地址服务提供商，这里我用的 Onedrive 选 19，其它服务提供商也一样，只是在后面的操作有所不同，具体可以去 rclone 官网查看。选择 19 后接下来的东西用过 pyone、oneindex 等第三方客户端的会很熟悉，没错就是 client_id 和 client_secret，在这里我们都直接回车使用默认的就行。接下来会提示是否更改配置，这个是一些 rclone 的配置属性，直接输入 n 使用默认的即可。最后就是最重要的一步了，提示是否使用自动配置，这里选择 Y，输入后会自动打开浏览器，如果没有，可以手动打开上面显示的地址，登录要使用的账号进行授权，授权成功后返回终端，这里要注意如果是没有管理员或者管理员限制使用第三方应用的是没法认证的。之后会询问是哪种类型的存储，选择 1 也就是 Onedrive 那个就好。然后终端上会显示当前配置，询问配置是否正确选择 y 就回到了刚开始的界面，输入 q 退出。到此 rclone 的配置已经完成，接下来需要把配置文件放在指定位置。配置文件是放在 <code>/data/media/0/rclone/rclone.conf</code>，也就是内置存储下的 rclone/rclone.conf 运行 <code>su -c "cat /data/media/0/rclone/rclone.conf &gt; /data/media/0/.rclone/rclone.conf"</code> 将配置文件添加到内置存储，最后先输入 su 授予 Termux root 权限，再运行 <code>/sbin/rclone remount</code> 等待命令运行完成即可。默认是挂载在 /mnt/cloud/ 目录下，目前无法挂载到 /sdcard 不过作者将在下一版添加这个功能。<br>　　最后再附上我的一个利用 rclone 进行备份的脚本，可以保存历史版本，语音播报备份情况。使用 tasker 之类的软件定时运行即可。需要安装 Termux 以及 Termux-API，并且 Termux 安装了 termux-tools，我把 rclone 添加到系统 PATH 里了，所以可以直接调用，如果 rclone 不在 /system/bin/ 或者 /system/xbin/ 中就需要使用 rclone 文件路径来调用（注意文件权限）。</p><details><summary>点击显示脚本内容</summary><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/system/bin/env sh</span></span><br><span class="line"><span class="built_in">export</span> LANG=C.UTF-8</span><br><span class="line"><span class="built_in">export</span> RCLONE_LOG_LEVEL=INFO</span><br><span class="line"><span class="built_in">export</span> RCLONE_LOG_FORMAT=date</span><br><span class="line"><span class="comment"># export RCLONE_BACKUP_DIR="love:/archive/$(date +%Y)/$(date +%F"_"%T)"</span></span><br><span class="line"><span class="built_in">export</span> RCLONE_BACKUP_DIR=<span class="string">"love:/old_files"</span>　　// 远程地址存储旧版备份文件的文件夹夹</span><br><span class="line"><span class="built_in">export</span> RCLONE_SUFFIX=<span class="string">"_<span class="variable">$(date +%F_%T)</span>"</span>　　// 旧备份文件名格式：原文件名_日期_时间</span><br><span class="line"><span class="built_in">export</span> RCLONE_LOG_FILE=/storage/emulated/0/rclone.log　　<span class="comment">#!/system/bin/env sh</span></span><br><span class="line"><span class="built_in">export</span> LANG=C.UTF-8</span><br><span class="line"><span class="built_in">export</span> RCLONE_LOG_LEVEL=INFO</span><br><span class="line"><span class="built_in">export</span> RCLONE_LOG_FORMAT=date</span><br><span class="line"><span class="comment"># export RCLONE_BACKUP_DIR="love:/archive/$(date +%Y)/$(date +%F"_"%T)"</span></span><br><span class="line"><span class="built_in">export</span> RCLONE_BACKUP_DIR=<span class="string">"love:/old_files"</span></span><br><span class="line"><span class="built_in">export</span> RCLONE_SUFFIX=<span class="string">"_<span class="variable">$(date +%F_%T)</span>"</span></span><br><span class="line"><span class="built_in">export</span> RCLONE_LOG_FILE=/storage/emulated/0/rclone.log　　// 日志</span><br><span class="line"><span class="built_in">export</span> XDG_CONFIG_HOME=<span class="string">"/storage/emulated/0/ADM/.config"</span>　　// 配置文件</span><br><span class="line">SD=/storage/emulated/0　　// 内置存储</span><br><span class="line"><span class="comment"># 要备份的目录</span></span><br><span class="line">buckup_dir=(<span class="string">".fooView"</span> <span class="string">"ADM"</span> <span class="string">"baidu"</span> <span class="string">"MyAndroidTools"</span> <span class="string">"Pictures"</span> <span class="string">"searchlite"</span> <span class="string">"ViPER4Android"</span> <span class="string">"Xposed_Edge_Icon"</span> <span class="string">"YueDu"</span> <span class="string">"习"</span>)</span><br><span class="line"><span class="comment"># 清空日志</span></span><br><span class="line">:&gt;<span class="variable">$RCLONE_LOG_FILE</span></span><br><span class="line"><span class="comment"># 检测网络链接</span></span><br><span class="line"><span class="comment"># 超时时间</span></span><br><span class="line">timeout=5</span><br><span class="line">	</span><br><span class="line"><span class="comment"># 目标网站</span></span><br><span class="line">target=baidu.com</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 获取响应状态码</span></span><br><span class="line">ret_code=`curl -I -s --connect-timeout <span class="variable">$timeout</span> <span class="variable">$target</span> -w %{http_code} | tail -n1`</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"x<span class="variable">$ret_code</span>"</span> = <span class="string">"x200"</span> ]; <span class="keyword">then</span></span><br><span class="line">    XiaoAiTTS <span class="string">"网络连接正常,开始备份！"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"网络连接正常,开始备份！"</span>&gt;&gt;<span class="variable">$SD</span>/rclone.log</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> dir <span class="keyword">in</span> <span class="variable">${buckup_dir[@]}</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"正在备份 <span class="variable">$SD</span>/<span class="variable">$dir</span>"</span></span><br><span class="line">        rclone sync <span class="string">"<span class="variable">$SD</span>/<span class="variable">$dir</span>"</span> love:/snapshot/<span class="string">"<span class="variable">$dir</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">XiaoAiTTS <span class="string">"rclone 备份完成！"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$(date +%F"-"%T)</span>\t备份完成！\n"</span>&gt;&gt;<span class="variable">$SD</span>/rclone.log</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    XiaoAiTTS <span class="string">"网络连接异常，停止备份！"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"网络连接异常，停止备份！"</span>&gt;&gt;<span class="variable">$SD</span>/rclone.log</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">export</span> XDG_CONFIG_HOME=<span class="string">"/storage/emulated/0/ADM/.config"</span></span><br><span class="line">SD=/storage/emulated/0</span><br><span class="line"><span class="comment"># 备份目录</span></span><br><span class="line">buckup_dir=(<span class="string">".fooView"</span> <span class="string">"ADM"</span> <span class="string">"baidu"</span> <span class="string">"MyAndroidTools"</span> <span class="string">"Pictures"</span> <span class="string">"searchlite"</span> <span class="string">"ViPER4Android"</span> <span class="string">"Xposed_Edge_Icon"</span> <span class="string">"YueDu"</span> <span class="string">"习"</span>)</span><br><span class="line"><span class="comment"># 清空日志</span></span><br><span class="line">:&gt;<span class="variable">$RCLONE_LOG_FILE</span></span><br><span class="line"><span class="comment"># 检测网络链接</span></span><br><span class="line"><span class="comment"># 超时时间</span></span><br><span class="line">timeout=5</span><br><span class="line">	</span><br><span class="line"><span class="comment"># 目标网站</span></span><br><span class="line">target=baidu.com</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 获取响应状态码</span></span><br><span class="line">ret_code=`curl -I -s --connect-timeout <span class="variable">$timeout</span> <span class="variable">$target</span> -w %{http_code} | tail -n1`</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"x<span class="variable">$ret_code</span>"</span> = <span class="string">"x200"</span> ]; <span class="keyword">then</span></span><br><span class="line">    XiaoAiTTS <span class="string">"网络连接正常,开始备份！"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"网络连接正常,开始备份！"</span>&gt;&gt;<span class="variable">$SD</span>/rclone.log</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> dir <span class="keyword">in</span> <span class="variable">${buckup_dir[@]}</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"正在备份 <span class="variable">$SD</span>/<span class="variable">$dir</span>"</span></span><br><span class="line">        rclone sync <span class="string">"<span class="variable">$SD</span>/<span class="variable">$dir</span>"</span> love:/snapshot/<span class="string">"<span class="variable">$dir</span>"</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">XiaoAiTTS <span class="string">"rclone 备份完成！"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$(date +%F"-"%T)</span>\t备份完成！\n"</span>&gt;&gt;<span class="variable">$SD</span>/rclone.log</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    XiaoAiTTS <span class="string">"网络连接异常，停止备份！"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"网络连接异常，停止备份！"</span>&gt;&gt;<span class="variable">$SD</span>/rclone.log</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure></details><p>　　其中 XiaoAiTTS 是我为了方便调用 Termux-API 的 TTS 工具写的小脚本，把它放在 /system/bin 或者 /system/xbin 这样就可以随便调用了，具体内容是：</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/system/bin/sh</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/data/data/com.termux/files/usr/lib</span><br><span class="line"><span class="built_in">export</span> PATH=/data/data/com.termux/files/usr/bin:/data/data/com.termux/files/usr/bin/applets</span><br><span class="line">termux-tts-speak <span class="variable">$1</span></span><br></pre></td></tr></tbody></table></figure><p>　　rclone 还有很多功能，我就不一一介绍了，官网上面对每一个命令都有详细点解释，参考官方文档即可。</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>玩机 • Android（三）——进阶篇</title>
    <url>/posts/40e3c7df.html</url>
    <content><![CDATA[<ul><li><a href="https://hoshizora.tw/posts/9e7b6f05.html" target="_blank" rel="external nofollow noopener noreferrer">玩机 • Android（一）——应用篇</a></li><li><a href="https://hoshizora.tw/posts/fab8c3b3.html" target="_blank" rel="external nofollow noopener noreferrer">玩机 • Android（二）——ROOT 篇</a></li></ul><p>Android 有两个模式：Recovery 和 Bootloader，也叫卡刷模式和线刷模式（部分手机可能不一样，功能都差不多）。</p><a id="more"></a><h2 id="Bootloader"><a href="#Bootloader" class="headerlink" title="Bootloader"></a>Bootloader</h2><p>系统在启动之前需要通过 bootloader 启动，手机启动的时候基带执行初始化，然后引导系统内核，直到系统启动。厂商为了安全，Google 也要求上锁，因而现在的手机基本都对 bootloader 上锁了，不解除就无法对 bootloader 进行更该（官方一般提供了解锁通道，申请通过后就能解锁）。Bootloader 模式通过电脑对设备进行清除数据、系统升级等操作，REC 也是在此模式下刷入的，救砖一般也是进的这个模式。Bootloader 一般是按住电源键和音量减键进入。进入后用数据线连接手机和电脑，电脑会自动安装所需驱动（没有自动安装的可以百度 Bootloader 驱动手动安装），安装好驱动后需要去下载 ADB 工具包</p><ul><li><p>Windows <a href="https://dl.google.com/android/repository/platform-tools-latest-windows.zip" target="_blank" rel="external nofollow noopener noreferrer">https://dl.google.com/android/repository/platform-tools-latest-windows.zip</a></p></li><li><p>Mac <a href="https://dl.google.com/android/repository/platform-tools-latest-darwin.zip" target="_blank" rel="external nofollow noopener noreferrer">https://dl.google.com/android/repository/platform-tools-latest-darwin.zip</a></p></li><li><p>Linux <a href="https://dl.google.com/android/repository/platform-tools-latest-linux.zip" target="_blank" rel="external nofollow noopener noreferrer">https://dl.google.com/android/repository/platform-tools-latest-linux.zip</a></p></li></ul><p>进入工具包目录，在当前目录打开终端，输入 <code>adb devices</code>会显示当前设备，如果没显示则可能是驱动没装好。</p><p><img alt="Screenshot_20181223_154659.png" data-src="https://i.loli.net/2018/12/23/5c1f3dca16d41.png"></p><p>将下载的 Recovery 文件放在当前文件夹中，输入<code>fastboot.exe flash recovery MI-NOTE-TWRP3.1.0.img</code>，刷入 Recovery （MI-NOTE-TWRP3.1.0.img 为文件名字），之后输入<code>fastboot.exe boot MI-NOTE-TWRP3.1.0.img</code>进入 Recovery 模式。Bootloader 还有很多其它的功能，就不多说了（我是不会说其实是我不会其它的（ ￣ー￣））。</p><h2 id="Recovery"><a href="#Recovery" class="headerlink" title="Recovery"></a>Recovery</h2><p>Recovery 看它的名字大概够强猜出其功能了。自带的 Recovery 是非常简陋的，并不能满足我们的要求，所以需要使用如 TWRP、CWM 之类的第三方 REC。替换方法在前面 Bootloader 中有。进入 REC 的方法不同品牌可能有所不同，MIUI 是按住电源键和音量加音量减，出现 logo 后屏幕突然一亮之后松手即可进入。原版 TWRP 是没有中文的，不过一般都能在网上找到支持中文的版本。主要功能为安装、清除、备份、恢复、挂载、设置、高级功能。</p><ul><li><p>安装</p><p>这个就是刷机、获取 ROOT、安装 Magisk、安装 Xposed 等要用到的。点击 Install 进入文件选择界面，默认是刷入卡刷包也可以点击右下角刷入镜像刷入 Recovery 或则 Boot。</p></li><li><p>清除</p><p>可以恢复出产设置，也可以格式化某一分区。</p></li><li><p>备份/恢复</p><p>备份/恢复分区</p></li><li><p>挂载</p><p>挂载分区，一般用不上，使用高级功能式可能会用到。某些手机支持 OTG 功能要在 Recovery 下使用 OTG 存储需进行挂载。</p></li><li><p>设置</p><p>一些 Recovery 的设置项，比如切换语言调节显示亮度等。</p></li><li><p>高级功能</p><p>文件浏览器、终端等。进入某些目录时需先保证已近挂载，否则会显示空白。</p></li><li><p>重启</p><p>高级重启功能。包含重启到 Bootloader、重启到 Recovery、正常重启。</p></li></ul><p>介绍完 Bootloader 和 Recovery 后，接下来就是 Magisk 和 Xposed 了。因为这两个都非常强大但也有很大可能导致手机出现问题，所以必须要先准备好第三方 REC 以备不时之需。</p><h2 id="Magisk"><a href="#Magisk" class="headerlink" title="Magisk"></a>Magisk</h2><ul><li><p>安装</p><p>方法在第二篇 ROOT 篇中已进行介绍此处不在赘述。</p></li><li><p>使用</p><p>仓库中有很多不错的模块，点击模块即可查看详细信息。也可以手动安装自己下载的模块。</p><p>注：Magisk 模块可以看做是将模块内容替换系统中对应内容。安装模块前最好打开查看下是否对自己有用。</p></li></ul><h2 id="Xposed"><a href="#Xposed" class="headerlink" title="Xposed"></a>Xposed</h2><p>官网：<a href="https://repo.xposed.info/" target="_blank" rel="external nofollow noopener noreferrer">https://repo.xposed.info/</a></p><p>Xposed 框架是一款可以在不修改 APK 的情况下（修改系统）影响程序员运行的框架服务，基于它可以制作很多功能强大的模块。（刷入 Xposed 会对手机性能有一定影响，且随着启用模块越多影响越大（单框架影响不大，主要是模块），开机时间也会变长）</p><ul><li><p>安装</p><p>安装时确保已解锁 Bootloader 、拥有 ROOT 权限。<br>下载 <a href="https://www.coolapk.com/apk/de.robv.android.xposed.installer" target="_blank" rel="external nofollow noopener noreferrer">Xposed Installer</a> 安装后打开，先下载卸载包以防出问题后可以卸载。然后点击安装，Install 和 Install via recovery 都差不多，一个是下载后直接安装一个要手动进 REC 卡刷。</p><p>注：Xposed 兼容性最好的是原生类原生之类的 ROM。国产 UI 可能会卡开机。虽然最新版兼容性已经很好了，但在 MIUI 上还是会出现主题无法修改状态栏样式（SolarWarez 针对 MIUI 发布了修改版，可以完美使用，但已不再更新，目前只支持 Android 6.0 及以下系统）的问题。作者也表示不会针对 MIUI 等进行特别优化。目前 Xposed 最高支持 sdk27 即 Android 8.1。</p><p>另一种方法是手动下载卡刷包在 REC 中刷入。</p><p>下载地址：<a href="https://dl-xda.xposed.info/framework/" target="_blank" rel="external nofollow noopener noreferrer">https://dl-xda.xposed.info/framework/</a><br>需要注意的是安装包 api 和 cpu 架构必须和手机对应。<br><img alt="Screenshot_2018-12-23-17-11-51-990_de.robv.android.xposed.installer_1.png" data-src="https://i.loli.net/2018/12/23/5c1f58022cc48.png"></p></li><li><p>使用</p><p>刷入后第一次开机示安装应用数可能需要很长时间，期间耐性等待即可。之后就不用这么久了。</p><p>此为我所使用的模块：<br><img alt="Screenshot_2018-12-23-17-51-24-354_de.robv.android.xposed.installer.png" data-src="https://i.loli.net/2018/12/23/5c1f5b674418b.png"><br>以上模块均可在<a href="https://www.coolapk.com" target="_blank" rel="external nofollow noopener noreferrer">酷安</a>和 Xposed 仓库中找到（点击 Xposed Installer 左上角，侧栏中的下载项就是仓库）。</p></li></ul><p>最后再说下，Magisk 能和 Xposed 共存，可以在 Magisk 中安装 Xposed，找到对应的 Magisk 模块安装就行，不过不论是否修改了系统，安装 Xposed 后 Magisk 的 systemless 特性都被破坏，并且使用 Magisk 安装的 Xposed 必须修改版 Xposed Installer 才能识别（点击 Magisk 模块即可看见下载地址）。还有就是 Magisk 和 Xposed 两个是不同的东西，Magisk 实现不了 Xposed 的很多功能。很多人觉得 Xposed 能实现的 Magisk 也能实现是错误的。</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>玩机 • Android（二）——ROOT 篇</title>
    <url>/posts/fab8c3b3.html</url>
    <content><![CDATA[<h2 id="Root-Android"><a href="#Root-Android" class="headerlink" title="Root (Android)"></a>Root (Android)</h2><p>首先来了解一下 ROOT 是什么：</p><blockquote><p>Root 是 Android 系统的一个术语，它使得用户可以获取 Android 操作系统的超级用户权限。Root 能够帮助用户越过手机制造商的限制，得以卸载本身预装的程序，或运行需要系统权限的动作。Android 系统的 Root 与苹果 iOS 系统的越狱类似。</p><footer><strong>wikipedia</strong><cite><a href="https://zh.wikipedia.org/zh-hans/ROOT_(Android)" target="_blank" rel="external nofollow noopener noreferrer">ROOT_(Android)</a></cite></footer></blockquote><p></p><a id="more"></a><p>简单点说就是当你拥有了 ROOT 权限你才能对你的手机想干嘛就干嘛。当然权利越大责任也越大，也意味着会面对更大的风险。因为 ROOT 是非官方行为，所以很多手机产商对 ROOT 后的手机不提供免费维修服务。现在大多数手机均加入了分区保护，未解锁 Bootloader 的情况下无法进行 ROOT 或刷机操作。</p><p>ROOT 的原理其实是通过系统漏洞或官方后门将 SU 可执行文件复制到 Android 系统的 /system 分区下。为了让用户使用 ROOT 权限，防止手机上任意软件获取 ROOT 权限还需安装一个权限管理软件进行管理。目前主流的超级权限管理工具非 Magisk 和 SuperSU 莫属了。还有如 MIUI、Flyme 以及部分类原生系统自带 ROOT。</p><h2 id="获取-ROOT"><a href="#获取-ROOT" class="headerlink" title="获取 ROOT"></a>获取 ROOT</h2><p>获取 ROOT 权限大致有三种方法。一是通过系统漏洞或官方后门通过软件获取，一是直接在刷机包中内置，再就是通过 Recovery 刷入特定的刷机包。最后一种方法应该是用的最广泛也是最简单的了。使用 Recovery 获取 ROOT 需要第三方 Recovery，有 Bootloader 锁的手机还需先解锁。第三方 Recovery 有 TWRP、CWM 等。前面说过 超级权限管理工具有 Magisk 和 SuperSU，它们均提供了对应的卡刷包，刷入即可获取 ROOT 权限。其中 Magisk 并不仅仅只有 ROOT 管理功能，具体将在第三篇中介绍。</p><h3 id="SuperSU"><a href="#SuperSU" class="headerlink" title="SuperSU"></a>SuperSU</h3><p>官网: <a href="http://www.supersu.com/" target="_blank" rel="external nofollow noopener noreferrer">http://www.supersu.com/</a></p><p>SuperSU 分 systemless 和 xbin 两种模式，systemless 模式不更该 /system 而是在 /data 目录创建一个 img 文件，在系统启动是加载此文件，好处是不破坏系统，坏处是授权响应慢，可能会因为 SuperSU APP 后台被杀死而无法授权；xbin 模式为将文件写入 /system ，SuperSU APP 将会安装在 /system 目录，需手动对 boot 打补丁，不然会卡开机界面，优点是授权响应快，恢复出厂设置仍能保留 ROOT ，缺点是会破坏系统完整性。官网下载的卡刷包会自动判断使用哪种模式因而不用担心用错。</p><p>卡刷包可在官网下载，进入 Recovery 刷入即可。有时候可能会遇见刷入后桌面不显示 SuperSU APP ，此时可打开拨号程序输入 <code>*#*#1234#*#*</code> ，同理输入这个也可以在桌面隐藏 SuperSU APP。</p><h3 id="Magisk"><a href="#Magisk" class="headerlink" title="Magisk"></a>Magisk</h3><p>MagiskManager: <a href="https://magiskmanager.com/" target="_blank" rel="external nofollow noopener noreferrer">https://magiskmanager.com/</a></p><p>XDA： <a href="https://forum.xda-developers.com/apps/magisk" target="_blank" rel="external nofollow noopener noreferrer">https://forum.xda-developers.com/apps/magisk</a></p><p>Github： <a href="https://github.com/topjohnwu/Magisk/releases" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/topjohnwu/Magisk/releases</a></p><p>Magisk 是一个台湾同胞开发的应用软件，其主要功能是不修改 /system 实现修改的效果，自带了 ROOT 管理。<br>与 SuperSU 一样，需下载卡刷包刷入。卡刷包可在上面三个链接中下载到，也可以直接安装 Magisk Manager APP，然后在 APP 中下载卡刷包。Magisk 与 SuperSU 并不兼容（实际上是因为两个都会修改同一个地方)如果已经刷了 SuperSU 再刷 Magisk 时会出错，此时去 SuperSU 设置中清除 SuperSU 即可（也可以刷入官方 boot）。</p><p>最后还是那句话：权利越大，责任越大。如果你不清楚你在干什么那么最好不要授权应用 ROOT 权限。当然也没必要对手机 ROOT 后的安全问题太过担心，只要注意授权管理软件的授权提示不乱给软件权限就没事。</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>VS Code 配置 C 和 C++ 环境</title>
    <url>/posts/d5ae7f1b.html</url>
    <content><![CDATA[<p>Visual Studio Code (简称 VS Code/VSC)是一款免费开源的代码编辑器，支持几乎所有的主流开发语言，有语法高亮、智能代码补全、自定义热键、符号自动补全、代码片段、代码对比 Diff、GIT 等特性，支持插件扩展。软件支持 Windows、Mac 以及 Linux。</p><p>官网：<a href="https://code.visualstudio.com/" target="_blank" rel="external nofollow noopener noreferrer">https://code.visualstudio.com/</a><br><img alt="vscode" data-src="https://i.loli.net/2019/06/08/5cfb5b61c8e8413483.jpg"></p><a id="more"></a><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>VS Code 可在官网下载，其只是一个编辑器并不是 IDE，不含编译器因而需要我们自己安装编译器。<br>编译器我选的是 GCC/G++ 配合 clang 使用，Windows 也可选 MSVC ，Mac 可选 clang 。以 Windows 为例。需去下载 MinGW-w64 和 LLVM 。</p><ul><li>LLVM Download Page: <a href="http://releases.llvm.org/download.html" target="_blank" rel="external nofollow noopener noreferrer">http://releases.llvm.org/download.html</a> 选Pre-Built Binaries中的Clang for Windows (64-bit)，不需要下.sig文件.</li><li>MinGW-w64: <a href="https://sourceforge.net/projects/mingw-w64/" target="_blank" rel="external nofollow noopener noreferrer">https://sourceforge.net/projects/mingw-w64/</a> 直接点 Download 即可。</li></ul><p>下载好后安装，添加环境变量时选第二项，安装位置选个你能找到的，后面会用到。<br><img alt="llvm" data-src="https://i.loli.net/2019/06/08/5cfb5b33bb73768144.jpg"></p><p>安装完了以后可能会弹出 cmd 说 MSVC integration install failed。这个是因为 Clang 默认使用的是 msvc 的工具链，而我们选择的工具链是 MinGW，所以就不用管这个提示。</p><p>MinGW随便装哪，Architecture 选 x86_64，装好以后把东西全部复制到 Clang的文件夹里去，他们会无冲突合并。同样，不做这一步也行，下面的配置里路径就自己改，还要手动把 MinGW 的 bin 文件夹加到 path 中，因为MinGW 不会自己加。至于为什么既要装 Clang 又要装 MinGW，是因为 Clang 没有头文件。然后就可以把 MinGW 删了（Uninstall.exe）。不建议安装多个MinGW，如果你安装了其他 IDE 需要注意把其他的 MinGW 从环境变量中去掉；也可以自己把他们的编译器设为 Clang。因为几乎所有的轻量级 IDE 用的都是MinGW 或 TDM-GCC，它们不制造编译器，只是打包了一个。ps:MinGW 安装时需要在线下载，可能需要科学上网。</p><p>弄好后可打开 CMD 输入 clang -v 和 gcc -v 应该显示图中内容（版本号不同没事）。如果没有显示就是环境没配置好，可以手动添加到 path （如何配置请自行百度），也可重复上面的操作。<br><img alt="test" data-src="https://i.loli.net/2019/06/08/5cfb5b33e542735446.jpg"></p><h2 id="配置-VS-Code"><a href="#配置-VS-Code" class="headerlink" title="配置 VS Code"></a>配置 VS Code</h2><h3 id="安装扩展"><a href="#安装扩展" class="headerlink" title="安装扩展"></a>安装扩展</h3><p>需要安装的扩展：</p><ul><li><code>C/C++</code></li><li><code>C/C++ Clang Command Adapter</code> 提供静态检测（Lint），很重要。</li><li><code>Code Runner</code> 添加右键编译运行代码，支持大多数语言。</li></ul><p>附：我的插件列表</p><ul><li><code>background</code> 修改 VS Code 背景</li><li><code>Bracket Pair Colorizer</code> 彩色花括号</li><li><code>C/C++ Snippets</code> 代码片段</li><li><code>Code Speel Checker</code> 规范命名用</li><li><code>filesize</code> 在左下角显示文件大小</li><li><code>Include Autocomplete</code> 提供头文件名字的补全</li><li><code>One Dark Pro</code> VS Code 主题</li><li><code>Setting Sync</code> 同步 VS Code 扩展、设置、代码片段到 GitHub Gist。</li><li><code>VSCode Great Icons</code> VS Code 文件夹图标</li></ul><h3 id="配置四个-json-文件"><a href="#配置四个-json-文件" class="headerlink" title="配置四个 json 文件"></a>配置四个 json 文件</h3><p>先新建一个用来存放代码的文件夹（工作区)，路径不能包含中文、空格和引号。打开 VS Code 选打开文件夹，选择刚刚创建的文件夹，点击 VS Code 的新建文件夹创建 .vscode 文件夹。（这么做是因为 Windows 资源管理器不允许创建 . 开头的文件夹），然后分别创建 c_cpp_properties.json 、launch.json 、tasks.json 和 settings.json。</p><h4 id="配置-c-cpp-properties-json"><a href="#配置-c-cpp-properties-json" class="headerlink" title="配置 c_cpp_properties.json"></a>配置 c_cpp_properties.json</h4><details><summary>点击查看文件详细信息</summary><figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        {</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Win32"</span>,</span><br><span class="line">            <span class="attr">"intelliSenseMode"</span>: <span class="string">"clang-x64"</span>,</span><br><span class="line">            <span class="attr">"includePath"</span>: [</span><br><span class="line">                <span class="string">"${workspaceFolder}"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++/x86_64-w64-mingw32"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++/backward"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/LLVM/include"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/LLVM/x86_64-w64-mingw32/include"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include-fixed"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++"</span>,</span><br><span class="line">                <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++/tr1"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"defines"</span>: [</span><br><span class="line">                <span class="string">"_DEBUG"</span>,</span><br><span class="line">                <span class="string">"UNICODE"</span>,</span><br><span class="line">                <span class="string">"__GNUC__=7"</span>,</span><br><span class="line">                <span class="string">"__cdecl=__attribute__((__cdecl__))"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"browse"</span>: {</span><br><span class="line">                <span class="attr">"path"</span>: [</span><br><span class="line">                    <span class="string">"${workspaceFolder}"</span>,</span><br><span class="line">                    <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++"</span>,</span><br><span class="line">                    <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++/x86_64-w64-mingw32"</span>,</span><br><span class="line">                    <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include/c++/backward"</span>,</span><br><span class="line">                    <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include"</span>,</span><br><span class="line">                    <span class="string">"C:/Program Files/LLVM/include"</span>,</span><br><span class="line">                    <span class="string">"C:/Program Files/LLVM/x86_64-w64-mingw32/include"</span>,</span><br><span class="line">                    <span class="string">"C:/Program Files/LLVM/lib/gcc/x86_64-w64-mingw32/8.1.0/include-fixed"</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">"limitSymbolsToIncludedHeaders"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">"databaseFilename"</span>: <span class="string">""</span></span><br><span class="line">            },</span><br><span class="line">            <span class="attr">"compilerPath"</span>: <span class="string">"C:\\Program Files\\LLVM\\bin\\gcc.exe"</span>,</span><br><span class="line">            <span class="attr">"cStandard"</span>: <span class="string">"c11"</span>,</span><br><span class="line">            <span class="attr">"cppStandard"</span>: <span class="string">"c++17"</span></span><br><span class="line">        }</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"version"</span>: <span class="number">4</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></details><p>可参考 <a href="https://github.com/Microsoft/vscode-cpptools/blob/master/Documentation/LanguageServer/MinGW.md" target="_blank" rel="external nofollow noopener noreferrer">Microsoft/vscode-cpptools</a> 如果没有合并 LLVM 和 MinGW 则 compilerPath 需要改成 MinGW gcc.exe 的路径。Windows 的路径是反斜杠需要使用两个反斜杠来转义，直接使用斜杠也行。includePath 和 browse 中的 path 均为头文件所在路径。ps:偶尔可能会出现提示找不到头文件但能正常编译运行。</p><h4 id="配置-launch-json"><a href="#配置-launch-json" class="headerlink" title="配置 launch.json"></a>配置 launch.json</h4><details><summary>点击查看文件详细信息</summary><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">// https://github.com/Microsoft/vscode-cpptools/blob/master/launch.md</span><br><span class="line">{</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        {</span><br><span class="line">            "name": "C Launch", //C 语言调试配置名称</span><br><span class="line">            "type": "cppdbg", // 配置类型，这里只能为cppdbg</span><br><span class="line">            "request": "launch", // 请求配置类型，可以为launch（启动）或attach（附加）</span><br><span class="line">            "program": "${fileDirname}/${fileBasenameNoExtension}.exe", // 将要进行调试的程序的路径</span><br><span class="line">            "args": [], // 程序调试时传递给程序的命令行参数，一般设为空即可</span><br><span class="line">            "stopAtEntry": false, // 设为true时程序将暂停在程序入口处</span><br><span class="line">            "cwd": "${workspaceFolder}", // 调试程序时的工作目录</span><br><span class="line">            "environment": [], // （环境变量？）</span><br><span class="line">            "externalConsole": true, // 调试时是否显示控制台窗口，一般设置为true显示控制台</span><br><span class="line">            "internalConsoleOptions": "neverOpen", // 如果不设为neverOpen，调试时会跳到“调试控制台”选项卡，你应该不需要对gdb手动输命令吧？</span><br><span class="line">            "MIMode": "gdb", // 指定连接的调试器，可以为gdb或lldb。但目前lldb在windows下没有预编译好的版本。</span><br><span class="line">            "miDebuggerPath": "C:/Program Files/LLVM/bin/gdb.exe", // 调试器路径。</span><br><span class="line">            "setupCommands": [</span><br><span class="line">                    {</span><br><span class="line">                        <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">                        <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                        <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">                    }</span><br><span class="line">                ],</span><br><span class="line">            "preLaunchTask": "CCompile", // 调试会话开始前执行的任务，一般为编译程序。与tasks.json的label相对应</span><br><span class="line">        },</span><br><span class="line"></span><br><span class="line">        {</span><br><span class="line">            "name": "C++ Launch", // C++ 调试配置名称</span><br><span class="line">            "type": "cppdbg", // 配置类型，这里只能为cppdbg</span><br><span class="line">            "request": "launch", // 请求配置类型，可以为launch（启动）或attach（附加）</span><br><span class="line">            "program": "${fileDirname}/${fileBasenameNoExtension}.exe", // 将要进行调试的程序的路径</span><br><span class="line">            "args": [], // 程序调试时传递给程序的命令行参数，一般设为空即可</span><br><span class="line">            "stopAtEntry": false, // 设为true时程序将暂停在程序入口处</span><br><span class="line">            "cwd": "${workspaceFolder}", // 调试程序时的工作目录</span><br><span class="line">            "environment": [], // （环境变量？）</span><br><span class="line">            "externalConsole": true, // 调试时是否显示控制台窗口，一般设置为true显示控制台</span><br><span class="line">            "internalConsoleOptions": "neverOpen", // 如果不设为neverOpen，调试时会跳到“调试控制台”选项卡</span><br><span class="line">            "MIMode": "gdb", // 指定连接的调试器</span><br><span class="line">            "miDebuggerPath": "C:/Program Files/LLVM/bin/gdb.exe", // 调试器路径。</span><br><span class="line">            "setupCommands": [</span><br><span class="line">                {</span><br><span class="line">                    <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">                    <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="attr">"ignoreFailures"</span>: <span class="literal">false</span></span><br><span class="line">                }</span><br><span class="line">            ],</span><br><span class="line">            "preLaunchTask": "C++Compile" // 调试会话开始前执行的任务，一般为编译程序。与tasks.json的label相对应</span><br><span class="line">        }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></details><h4 id="配置-tasks-json"><a href="#配置-tasks-json" class="headerlink" title="配置 tasks.json"></a>配置 tasks.json</h4><details><summary>点击查看文件详细信息</summary><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">// https://code.visualstudio.com/docs/editor/tasks</span><br><span class="line">{</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">    <span class="attr">"tasks"</span>: [</span><br><span class="line">        {</span><br><span class="line">            "label": "CCompile", // 任务名称，与launch.json的preLaunchTask相对应</span><br><span class="line">            "command": "clang", // 要使用的编译器</span><br><span class="line">            "args": [</span><br><span class="line">                "${file}",</span><br><span class="line">                "-o", // 指定输出文件名，不加该参数则默认输出a.exe</span><br><span class="line">                "${fileDirname}/${fileBasenameNoExtension}.exe",</span><br><span class="line">                "-g", // 生成和调试有关的信息</span><br><span class="line">                "-Wall", // 开启额外警告</span><br><span class="line">                "-static-libgcc", // 静态链接</span><br><span class="line">                "-fcolor-diagnostics",</span><br><span class="line">                "--target=x86_64-w64-mingw", // 默认target为msvc，不加这一条就会找不到头文件</span><br><span class="line">                <span class="string">"-std=c11"</span></span><br><span class="line">            ], // 编译命令参数</span><br><span class="line">            "type": "shell",</span><br><span class="line">            "group": "build",</span><br><span class="line">            "presentation": {</span><br><span class="line">                "echo": true,</span><br><span class="line">                "reveal": "never", // 在“终端”中显示编译信息的策略，可以为always，silent，never。具体参见VSC的文档</span><br><span class="line">                "focus": false,</span><br><span class="line">                "panel": "shared" // 不同的文件的编译信息共享一个终端面板</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">            "label": "C++Compile", // 任务名称，与launch.json的preLaunchTask相对应</span><br><span class="line">            "command": "clang++", // 要使用的编译器</span><br><span class="line">            "args": [</span><br><span class="line">                "${file}",</span><br><span class="line">                "-o", // 指定输出文件名，不加该参数则默认输出a.exe</span><br><span class="line">                "${fileDirname}/${fileBasenameNoExtension}.exe",</span><br><span class="line">                "-g", // 生成和调试有关的信息</span><br><span class="line">                "-Wall", // 开启额外警告</span><br><span class="line">                "-static-libgcc", // 静态链接</span><br><span class="line">                "-fcolor-diagnostics",</span><br><span class="line">                "--target=x86_64-w64-mingw", // 默认target为msvc，不加这一条就会找不到头文件</span><br><span class="line">                <span class="string">"-std=c++17"</span></span><br><span class="line">            ], // 编译命令参数</span><br><span class="line">            "type": "shell",</span><br><span class="line">            "group": "build",</span><br><span class="line">            "presentation": {</span><br><span class="line">                "echo": true,</span><br><span class="line">                "reveal": "never", // 在“终端”中显示编译信息的策略，可以为always，silent，never。具体参见VSC的文档</span><br><span class="line">                "focus": false, // 设为true后可以使执行task时焦点聚集在终端，但对编译c和c++来说，设为true没有意义</span><br><span class="line">                "panel": "shared" // 不同的文件的编译信息共享一个终端面板</span><br><span class="line">            }</span><br><span class="line">            // "problemMatcher":"$gcc" // 如果你不使用clang，去掉前面的注释符，并在上一条之后加个逗号。)</span><br><span class="line">        }</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></details><h4 id="配置-settings-json"><a href="#配置-settings-json" class="headerlink" title="配置 settings.json"></a>配置 settings.json</h4><details><summary>点击查看文件详细信息</summary><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    "code-runner.runInTerminal": true, // 设置成false会在“输出”中输出，无法交互</span><br><span class="line">    "code-runner.executorMap": {</span><br><span class="line">        "c": "cd $dir &amp;&amp; clang $fileName -o $fileNameWithoutExt.exe -Wall -g -Og -static-libgcc -fcolor-diagnostics --target=x86_64-w64-mingw -std=c11 &amp;&amp; $dir$fileNameWithoutExt",</span><br><span class="line">        "cpp": "cd $dir &amp;&amp; clang++ $fileName -o $fileNameWithoutExt.exe -Wall -g -Og -static-libgcc -fcolor-diagnostics --target=x86_64-w64-mingw -std=c++17 &amp;&amp; $dir$fileNameWithoutExt"</span><br><span class="line">    }, // 设置code runner的命令行</span><br><span class="line">    "code-runner.saveFileBeforeRun": true, // run code前保存</span><br><span class="line">    "code-runner.preserveFocus": true, // 若为false，run code后光标会聚焦到终端上。如果需要频繁输入数据可设为false</span><br><span class="line">    "code-runner.clearPreviousOutput": false, // 每次run code前清空属于code runner的终端消息</span><br><span class="line"></span><br><span class="line">    "C_Cpp.clang_format_sortIncludes": true, // 格式化时调整include的顺序（按字母排序）</span><br><span class="line">    "C_Cpp.intelliSenseEngine": "Default", // 可以为Default或Tag Parser，后者较老，功能较简单。具体差别参考cpptools插件文档</span><br><span class="line">    "C_Cpp.errorSquiggles": "Disabled", // 因为有clang的lint，所以关掉</span><br><span class="line">    "editor.formatOnType": true, // 输入时就进行格式化，默认触发字符较少，分号可以触发</span><br><span class="line">    "editor.snippetSuggestions": "top", // snippets代码优先显示补全</span><br><span class="line"></span><br><span class="line">    "clang.cflags": [ // 控制c语言静态检测的参数</span><br><span class="line">        "--target=x86_64-w64-mingw",</span><br><span class="line">        "-std=c11",</span><br><span class="line">        <span class="string">"-Wall"</span></span><br><span class="line">    ],</span><br><span class="line">    "clang.cxxflags": [ // 控制c++静态检测时的参数</span><br><span class="line">        "--target=x86_64-w64-mingw",</span><br><span class="line">        "-std=c++17",</span><br><span class="line">        <span class="string">"-Wall"</span></span><br><span class="line">    ],</span><br><span class="line">    "files.associations": {</span><br><span class="line">        "iostream": "cpp",</span><br><span class="line">        "iomanip": "cpp",</span><br><span class="line">        "array": "cpp",</span><br><span class="line">        "string_view": "cpp",</span><br><span class="line">        "random": "cpp",</span><br><span class="line">        "ostream": "cpp",</span><br><span class="line">        "atomic": "cpp",</span><br><span class="line">        "*.tcc": "cpp",</span><br><span class="line">        "cctype": "cpp",</span><br><span class="line">        "chrono": "cpp",</span><br><span class="line">        "clocale": "cpp",</span><br><span class="line">        "cmath": "cpp",</span><br><span class="line">        "complex": "cpp",</span><br><span class="line">        "condition_variable": "cpp",</span><br><span class="line">        "cstdint": "cpp",</span><br><span class="line">        "cstdio": "cpp",</span><br><span class="line">        "cstdlib": "cpp",</span><br><span class="line">        "cstring": "cpp",</span><br><span class="line">        "ctime": "cpp",</span><br><span class="line">        "cwchar": "cpp",</span><br><span class="line">        "cwctype": "cpp",</span><br><span class="line">        "exception": "cpp",</span><br><span class="line">        "fstream": "cpp",</span><br><span class="line">        "initializer_list": "cpp",</span><br><span class="line">        "iosfwd": "cpp",</span><br><span class="line">        "istream": "cpp",</span><br><span class="line">        "limits": "cpp",</span><br><span class="line">        "memory": "cpp",</span><br><span class="line">        "mutex": "cpp",</span><br><span class="line">        "new": "cpp",</span><br><span class="line">        "numeric": "cpp",</span><br><span class="line">        "ratio": "cpp",</span><br><span class="line">        "sstream": "cpp",</span><br><span class="line">        "stdexcept": "cpp",</span><br><span class="line">        "streambuf": "cpp",</span><br><span class="line">        "system_error": "cpp",</span><br><span class="line">        "thread": "cpp",</span><br><span class="line">        "tuple": "cpp",</span><br><span class="line">        "type_traits": "cpp",</span><br><span class="line">        "typeinfo": "cpp",</span><br><span class="line">        "utility": "cpp"</span><br><span class="line">    },</span><br><span class="line">    "cSpell.language": "en",</span><br><span class="line">    "clang.completion.enable":true // 效果稍好，如果卡，可关掉</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></details><p>建议放置在工作区设置。</p><p>另附个人设置：</p><details><summary>点击查看文件详细信息</summary><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    "editor.fontFamily": "Consolas, 微软雅黑", // 控制编辑器字体</span><br><span class="line">    "workbench.colorTheme": "One Dark Pro", // 主题</span><br><span class="line">    "files.trimTrailingWhitespace": true,</span><br><span class="line">    "sync.gist": "xxxxxxxxxxxxxxxxxxxxx", //settings sync gist</span><br><span class="line">    "sync.lastUpload": "2018-06-24T05:40:57.167Z",</span><br><span class="line">    "sync.forceDownload": false,</span><br><span class="line">    "sync.askGistName": false,</span><br><span class="line">    "sync.removeExtensions": true,</span><br><span class="line">    "sync.syncExtensions": true,</span><br><span class="line">    "workbench.iconTheme": "vscode-great-icons", // 文件夹图标</span><br><span class="line">    "files.autoSave": "afterDelay", // 自动保存方式</span><br><span class="line">    "files.autoSaveDelay": 120000, // 自动保存延迟</span><br><span class="line">    "editor.dragAndDrop": false, // 选中文字后，可以拖动它们调整位置</span><br><span class="line">    "explorer.confirmDragAndDrop": false,</span><br><span class="line">    "explorer.confirmDelete": false,</span><br><span class="line">    "files.autoGuessEncoding": true, // 自动检测文件编码</span><br><span class="line">    "sync.autoDownload": false, // 自动下载备份</span><br><span class="line">    "sync.autoUpload": false, //自动上传备份</span><br><span class="line">    "sync.lastDownload": "",</span><br><span class="line">    "sync.host": "",</span><br><span class="line">    "sync.pathPrefix": "",</span><br><span class="line">    "sync.quietSync": false,</span><br><span class="line">    "cSpell.language": "en",</span><br><span class="line">    "editor.multiCursorModifier": "ctrlCmd",</span><br><span class="line">    "git.ignoreMissingGitWarning": true,</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></details><h3 id="开始写代码"><a href="#开始写代码" class="headerlink" title="开始写代码"></a>开始写代码</h3><p>新建一个文件，后缀视语言而定，C 语言为 .c (使用 .cpp 也能运行，但不建议)，C++ 为 .cpp。点击上部分 终端-运行生成任务 （Ctrl + Shift + B)进行编译,Ctrl + F5 只运行。也可按 F5 启用调试。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>VS Code 本身只是个文本编辑器，其他功能都是靠扩展实现的。要实现某个功能必须进行配置才能使用。VS Code 本身颜值很高，相比于 VS 动辄几 G 来说体积也不是很大，运行过程中占用的内存也不多且支持大多数语言。</p><p>参考链接:</p><ul><li><a href="https://www.zhihu.com/question/30315894" target="_blank" rel="external nofollow noopener noreferrer">https://www.zhihu.com/question/30315894</a></li><li><a href="https://blog.csdn.net/u013322949/article/details/60339735" target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/u013322949/article/details/60339735</a></li></ul><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>玩机 • Android（一）——应用篇</title>
    <url>/posts/9e7b6f05.html</url>
    <content><![CDATA[<img width="500" data-src="https://i.loli.net/2019/09/02/jRZEznveFTCpocU.jpg"><a id="more"></a> 闲来无事，写几篇水文。仅为我个人玩机经历，如果觉得对，欢迎参考，如果不对，请无视。全文分为 [应用篇](#apps)、Root 篇 和 进阶篇。<p><span id="apps"></span></p><div class="note info"><p>应用前带 [root] 为需 root 权限应用，红色标记为可能会对设备造成损害的应用。黄色标记为需翻墙应用。大部分均可在酷安下载。</p></div><h2 id="酷安-发现应用的乐♂趣"><a href="#酷安-发现应用的乐♂趣" class="headerlink" title="酷安 发现应用的乐♂趣"></a><a href="https://www.coolapk.com/" target="_blank" rel="external nofollow noopener noreferrer">酷安</a> 发现应用的乐♂趣<img id="github-emoji" height="25" width="25" data-src="https://i.loli.net/2019/06/08/5cfb5df7b796d58009.jpg"></h2><p>酷安算是一个不错的应用市场，有很多酷友自己开发的软件，很多大佬交流分享经验。虽然因为越做越大，出现了部分不好的现象，但总体环境还是很好的。特别值得关注的是软件的评论区，多逛逛往往会有很多收获。<br><img alt="coolapk" data-src="https://i.loli.net/2019/06/08/5cfb5df8ecd1078695.jpg"></p><h2 id="fooView"><a href="#fooView" class="headerlink" title="fooView"></a><a href="https://www.coolapk.com/apk/com.fooview.android.fooview" target="_blank" rel="external nofollow noopener noreferrer">fooView</a></h2><p>借用小编的一段话：一款功能十分强大的浮动按钮，各种操作均可用手势完成，单手操作毫不费劲，使用起来也相当智能，毕竟和原来的操作方式有很大改变，需要时间适应，但适应后很可能就停不下来了，总之值得细细把玩一番。<br><img alt="fooView" data-src="https://i.loli.net/2019/06/08/5cfb5dfa7d1ba49843.jpg"><br>fooView 集成了 应用启动器、文件管理器、图片浏览（编辑）器、录屏、长截图、屏幕取词及分词、OCR、浏览器（带去广告b及多线程下载器）、FTP/S 服务及客户端、SFTP、SMB、WebDAV 客户端等等多个功能。足以应付日常使用。可添加自定义任务实现部分 Tasker 的功能，如定时提醒喝水，定时显示天气等等。总而言之是一款功能十分强大的浮动按钮。</p><h2 id="Via-浏览器"><a href="#Via-浏览器" class="headerlink" title="Via 浏览器"></a><a href="https://www.coolapk.com/apk/mark.via" target="_blank" rel="external nofollow noopener noreferrer">Via 浏览器</a></h2><p>via 浏览器是酷友的作品，注重浏览体验，干净利落，化繁为简，简约而不简单。apk 体积仅 503KB 安装后也才 17M ，这相比于其他浏览器动辄上百 M 占用，真的是小太多了。当然 via 小也是有原因的，因为它不带内核，调用的是系统的 WebView，对于系统较新或者能更新 WebView 的手机来说很好，如果是系统比较老的建议使用 <a href="https://www.coolapk.com/apk/com.quark.browser" target="_blank" rel="external nofollow noopener noreferrer">夸克</a> （UC 团队的作品，也很不错）。</p><ul><li><p>功能：</p><ol><li>没有开屏广告，没有新闻推荐，没有广告植入等等一切和浏览器无关的功能。安安静静的做一个浏览器。</li><li>支持书签云同步</li><li>支持去广告（可手动标记或同步现成的规则，也可使用 via 的 hosts 拦截）</li><li>支持油猴脚本（油猴脚本大多数均为电脑界面，手机上使用可能会不兼容）</li><li>支持自定义浏览器标示，查看源码，查看网络日志，资源嗅探（可调用 ADM 下载或 MXplayer 在线播放）。</li><li>自定义主页：支持使用 HTML 代码以及 CSS 进行美化，也可使用完整的 html 网页（下图使用的就是 html 文件为主页）</li></ol></li><li><p>缺点： 依赖于系统 WebView 因而不像 QQ 浏览器， UC 浏览器等自带内核浏览器功能多。如 视频播放无法手势控制、悬浮播放。没有账号密码自动填写（作者说会解决）</p></li></ul><p><img alt="Via" data-src="https://i.loli.net/2019/06/08/5cfb5e794404686948.jpg"></p><p>注：via 使用二维码扫描需勾选 via设置-插件-二维码扫描 按提示下载安装 <a href="https://www.coolapk.com/apk/mark.qrcode" target="_blank" rel="external nofollow noopener noreferrer">二维码扫描</a> 软件即可。下载管理默认使用系统内置下载器，可勾选 via设置-插件-下载管理 启用 ADM 下载器。</p><p>附：</p><ul><li><p><a href="http://via-app.cn/via" target="_blank" rel="external nofollow noopener noreferrer">via 可用脚本及部分主页</a></p></li><li><p>ADM 下载器 <code>https://www.coolapk.com/apk/com.dv.adm.pay</code> 复制链接到 酷安 客户端打开。</p></li><li><p>主页文件(与图中有部分差异)链接:<code>https://pan.baidu.com/s/1tMZ8Eie_ewVKSIMtLdnpoQ</code> 密码:<code>2htc</code></p></li></ul><h2 id="黑阈"><a href="#黑阈" class="headerlink" title="黑阈"></a><div class="note danger"><p><a href="https://www.coolapk.com/apk/me.piebridge.brevent" target="_blank" rel="external nofollow noopener noreferrer">黑阈</a></p></div></h2><p>对付毒瘤的一大神器，可控制 APP 权限，冻结 APP。需使用 ADB 或 root 开启。免费版有很大限制，支付 5$ 开启所有功能。<a href="https://jianyu.io/br/price.zh.html" target="_blank" rel="external nofollow noopener noreferrer">黑阈版本与价格</a> 作者会不定时进行活动，可关注其酷安动态。</p><p><img alt="brevent" data-src="https://i.loli.net/2019/06/08/5cfb5e9153b2e47947.jpg"></p><p>附：<a href="https://jianyu.io/br/br.pdf" target="_blank" rel="external nofollow noopener noreferrer">黑阈使用说明书</a> （PDF 文件，点击即可下载。强烈建议初次使用时先看一遍）</p><p><span id="jump"></span></p><h2 id="root-My-Android-Tools"><a href="#root-My-Android-Tools" class="headerlink" title="[root]My Android Tools"></a>[root]<a href="https://www.coolapk.com/apk/cn.wq.myandroidtools" target="_blank" rel="external nofollow noopener noreferrer">My Android Tools</a></h2><p>一款神器，能干的事情很爽，遇到一些个流氓app，这东西有用。My Android Tools 可以禁用应用的组件如 服务、广播接收器和活动 等。服务即为我们所用的功能，广播接受器负责接收系统的状态等等，而活动都是在我们使用过程中才启动。活动除了广告活动（带 AD、advertising 字样的 activity ，注意区分 download 等活动）一般不用去禁用，即便禁了效果也不大。主要要禁用的是活动和广播接收器。ps：禁用广告需使用 Pro 版</p><ul><li><p>广播接收器</p><p>如果某个应用你不想让它推送消息那么可以把广播接收器全部禁用了，大多数应用的广播接收器都可以全部禁用（不推荐）。当然最好是针对某一个进行禁用，如 带 boot 的大多为开机自启，对于不需要开机自启的软件可以禁用。带 push 的均为消息推送，保留一个就行（如果软件同时支持 FCM 和国内推送服务且手机装了 Google 服务建议保留 GCM 和一个国内推送服务，MIUI 用户建议保留 Mipush）。</p></li><li><p>服务</p><p>这个是重点，对付毒瘤软件有奇效。现在很多应用都变得越来越臃肿。拿 QQ<br>来说，运行时内存占用可达 三四百M ，但这里面又有多少是我们真正需要的呢？而使用 My Android Tools 进行调校后 QQ 仅仅占用 30M 左右，并且没有任何功能损失。在广播接受器中说过关闭消息推送，但最有效的还是 服务 和 广播接收器 一起禁用。国内消息推送服务各自为营，为了保活不择手段，当然这是厂商为了保证消息能及时准确推送到用户手里设置的，但这样手机就遭殃了。每打开一个应用就会启动一个推送服务，而推送服务一直挂在后台，部分推送服务甚至会唤醒用户未打开的应用，被唤醒应用又会唤醒其他未打开应用。这就是为什么一打开 xx软件 然后看下后台全家桶全被打开了的原因。国内推送服务有 腾讯的 XG、小米的 XMPush、华为的 HuaweiPush、魅族的 MeizuPush、个推的 gtpush、极光的 jpush、OPPO（coloros）、阿里、百度等等厂商的推送服务。还有 融云 sdk（rong）、个推 sdk（igexin）、友盟 sdk（umeng）等也提供了推送服务。其中支持 XMPush 的应用最多，体验也更接近于 FCM。Android 的 FCM 消息推送其实是很不错的，然而国情所限，体验并没有本土推送服务好。禁用推送服务时可直接搜索 push 展开服务全名进行禁用即可。</p></li></ul><p>My Android Tools 可以备份还原自己的禁用列表，也可使用他人分享的备份文件进行恢复。部分组件可能会自动恢复需辅助使用 <a href="https://www.coolapk.com/apk/cn.wq.myandroidtoolsxposed" target="_blank" rel="external nofollow noopener noreferrer">My Android Tols Xposed</a> ，此为 Xposed 模块，在第三篇中会介绍如何使用 Xposed 模块，此处不做过多介绍。<br><img alt="myandroidtools" data-src="https://i.loli.net/2019/06/08/5cfb5eb468b7093584.jpg"></p><h2 id="root-AppOpsX"><a href="#root-AppOpsX" class="headerlink" title="[root]AppOpsX"></a>[root]<a href="https://github.com/linusyang92/AppOpsX" target="_blank" rel="external nofollow noopener noreferrer">AppOpsX</a></h2><p>此为 AppOpsX 加入 IFW 支持，原版只含 appops（权限管理）。可限制软件调用权限（即便运行软件时允许权限，若 AppOps 禁止则实际仍为禁止) 软件使用需将其安装为系统程序。（使用前建议查看项目 REANME）<br><img alt="AppOpsX" data-src="https://i.loli.net/2019/06/08/5cfb5ecd254ea43307.jpg"></p><p>在设置中可开启 Intent 防火墙，默认长按显示服务，之后的使用方法与 <a href="#jump">My Android Tools</a> 无异。效果与 My Android Tools一样，甚至更好。My Android Tools 的配置可转换为 IFW 配置。<a href="https://github.com/apkjam/MAT2IFW" target="_blank" rel="external nofollow noopener noreferrer">转换项目地址</a></p><h2 id="Tasker"><a href="#Tasker" class="headerlink" title="Tasker"></a>Tasker</h2><p><code>https://www.coolapk.com/apk/net.dinglisch.android.taskerm</code> 复制链接使用酷安客户端打开。</p><p>一款系统增强型的软件，可以实现多种自动控制场景，功能非常强大。有一定上手难度，不过好在可以导入别人制作好的配置文件。</p><p><img alt="Tasker" data-src="https://i.loli.net/2019/06/08/5cfb5ee82312876735.jpg"></p><h2 id="Shadowsocks-SSR"><a href="#Shadowsocks-SSR" class="headerlink" title="Shadowsocks/SSR"></a><div class="note warning"><p>Shadowsocks/SSR</p></div></h2><p>这两个不用多说，爬墙必备工具。</p><h2 id="锤子BigBang"><a href="#锤子BigBang" class="headerlink" title="锤子BigBang"></a><a href="https://www.coolapk.com/apk/com.forfan.bigbang" target="_blank" rel="external nofollow noopener noreferrer">锤子BigBang</a></h2><p>来自于锤子手机 BigBang 功能，但和锤子手机并没有关系。可以全局复制文字，将文字拆分成词组，随意编辑、拖拽组合，提高效率! 单击、双击、长按、复制等多种选词方式随心选。包含翻译、OCR 取词、区域截图、剪贴板等功能。个人觉得分词功能比 fooView 好用。<br><img alt="BigBang" data-src="https://i.loli.net/2019/06/08/5cfb5dfa6617a57290.jpg"></p><h2 id="MT管理器-2-0"><a href="#MT管理器-2-0" class="headerlink" title="MT管理器 2.0"></a><a href="https://www.coolapk.com/apk/bin.mt.plus" target="_blank" rel="external nofollow noopener noreferrer">MT管理器 2.0</a></h2><p>一款强大的文件管理工具和APK逆向修改神器。普通文件管理器的功能都有，特色功能为 APK 编辑功能，主要有 DEX 编辑，ARSC 编辑，XML 编辑，APK 签名、APK 优化、APK 共存、去除签名校验、RES 资源混淆、RES 反资源混淆、翻译模式等。APK 编辑免费用户有部分限制。</p><p><img alt="MT" data-src="https://i.loli.net/2019/06/08/5cfb5f1d3a3d544252.jpg"></p><h2 id="Telegram-https-telegram-org"><a href="#Telegram-https-telegram-org" class="headerlink" title="Telegram https://telegram.org"></a><div class="note warning"><p>Telegram <a href="https://telegram.org" target="_blank" rel="external nofollow noopener noreferrer">https://telegram.org</a></p></div></h2><p>俄罗斯的一款加密即时聊天软件，具有高度保密性。</p><h2 id="FastHub"><a href="#FastHub" class="headerlink" title="FastHub"></a><a href="https://github.com/k0shk0sh/FastHub" target="_blank" rel="external nofollow noopener noreferrer">FastHub</a></h2><p>一款开源的 GitHub 客户端。界面很简洁，该有的功能都有。<br><img alt="FastHub" data-src="https://i.loli.net/2019/06/08/5cfb5f3b3d58236825.jpg"></p><h2 id="Mobilism"><a href="#Mobilism" class="headerlink" title="Mobilism"></a><a href="https://forum.mobilism.org/index.php" target="_blank" rel="external nofollow noopener noreferrer">Mobilism</a></h2><p>国外知名破解软件站点，发布更新各种破解付费/去广告软件（国外软件居多）。下载需翻墙。</p><p><img alt="Mobilism" data-src="https://i.loli.net/2019/06/08/5cfb5f3c1600754235.jpg"></p><h2 id="SD-Maid"><a href="#SD-Maid" class="headerlink" title="SD Maid"></a><a href="https://www.coolapk.com/apk/eu.thedarken.sdm" target="_blank" rel="external nofollow noopener noreferrer">SD Maid</a></h2><p>一款很不错的 SD 卡清理工具。授予 root 权限后效果更好。</p><p><img alt="SD Maid" data-src="https://i.loli.net/2019/06/08/5cfb5f3c8d9d787786.jpg"></p><h2 id="存储空间清理"><a href="#存储空间清理" class="headerlink" title="存储空间清理"></a><a href="https://www.coolapk.com/apk/com.ktls.fileinfo" target="_blank" rel="external nofollow noopener noreferrer">存储空间清理</a></h2><p>与 SD Maid 各有优劣。高级功能需付费 3元。</p><p><img alt="fileinfo" data-src="https://i.loli.net/2019/06/08/5cfb5f779702e75148.jpg"></p><h2 id="BusyBox"><a href="#BusyBox" class="headerlink" title="BusyBox"></a><a href="https://www.coolapk.com/apk/stericson.busybox" target="_blank" rel="external nofollow noopener noreferrer">BusyBox</a></h2><p>Linux 工具里的瑞士军刀,集成了三百多个最常用Linux命令和工具。有无 root 权限均可安装，root 下安装操作不当可能会导致系统无法启动。MIUI 自带 busybox （非最新）。</p><p><img alt="BusyBox" data-src="https://i.loli.net/2019/06/08/5cfb5f79416ad74300.jpg"></p><h2 id="root-钛备份"><a href="#root-钛备份" class="headerlink" title="[root]钛备份"></a>[root]钛备份</h2><p><code>https://www.coolapk.com/apk/com.keramidas.TitaniumBackup</code><br>复制链接使用酷安 app 打开。<br>非常强悍的程序和系统备份工具,需安装 BusyBox ，可备份到 Google Drive、Dropbox（需开启增强版）。部分功能需付费。</p><p><img alt="TitaniumBackup" data-src="https://i.loli.net/2019/06/08/5cfb5f7943d0974266.jpg"></p><h2 id="Termux"><a href="#Termux" class="headerlink" title="Termux"></a><a href="https://www.coolapk.com/apk/com.termux" target="_blank" rel="external nofollow noopener noreferrer">Termux</a></h2><p>一个强大的终端模拟器，可使用 pkg 及 apt 包管理器。</p><p><img alt="Termux" data-src="https://i.loli.net/2019/06/08/5cfb5f795eb5e93872.jpg"></p><h2 id="root-3C-Toolbox"><a href="#root-3C-Toolbox" class="headerlink" title="[root] 3C Toolbox"></a><div class="note danger"><p>[root] <a href="https://www.coolapk.com/apk/ccc71.at" target="_blank" rel="external nofollow noopener noreferrer">3C Toolbox</a></p></div></h2><p>一个非常实用的工具箱，包含多个功能。</p><p><img alt="3C Toolbox" data-src="https://i.loli.net/2019/06/08/5cfb5fe9c017513285.jpg"></p><p>优秀的软件太多太多，这里只写了一部分我正在使用的，并不代表只有这些。</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>使用 Mentohust 代替锐捷进行校园网认证</title>
    <url>/posts/2443be7d.html</url>
    <content><![CDATA[<p>使用 <a href="https://baike.baidu.com/item/mentohust/11049624" target="_blank" rel="external nofollow noopener noreferrer">Mentohust</a> 代替锐捷进行认证。mentohust 有多个平台，此处只讲在路由器上使用。大多数第三方固件均已集成了 Mentohust，如果没有集成的话可自行安装。不想用第三方固件或者不会刷固件可以购买极路由，官方自带锐捷认证。</p><a id="more"></a><p>使用 mentohust 需要安装三个软件包，libpcap.ipk、luci-app-mentohust.ipk、mentohust.ipk。其中 luci-app-mentohust.ipk 为 web 管理，可不安装。mentohust.ipk 包也可直接使用 mentohust 二进制包使用命令行运行。软件包需要对应路由器 cpu 架构，此处不提供文件，需自行解决，若实在找不到可在评论留言，我有时间会帮忙编译。</p><p>部分项目地址：</p><ul><li><a href="https://github.com/hyrathb/mentohust" target="_blank" rel="external nofollow noopener noreferrer">mentohust 加入 v4 支持</a></li><li><a href="https://github.com/ptpt52/com.ptpt52.openwrt" target="_blank" rel="external nofollow noopener noreferrer">com.ptpt52.openwrt</a> 含 luci-app-mentohust，mentohust-proxy</li></ul><p>mentohust 所有参数可在终端输入 <code>mentohust -h</code> 查看，输入后显示以下内容：</p><p><img alt="mentohust" data-src="https://i.loli.net/2019/06/08/5cfb5bfcbe79f16881.jpg"></p><p>或者直接在 webui 填写 （此为本人所有参数仅供参考）：</p><p><img alt="mentohust" data-src="https://i.loli.net/2019/06/08/5cfb5c28f089313758.jpg"><br>其中 用户名填：<code>学号@运营商</code> 移动宽带则为移动，电信填电信，联通可直接使用学号。密码为 <code>宽带密码即使用锐捷客户端认证时的密码</code>,网卡选择 WAN 口网卡（可在 web 界面 网络-接口 查看。其他参数按照上图填写即可。</p><p>也可使用 <a href="https://github.com/updateing/minieap" target="_blank" rel="external nofollow noopener noreferrer">minieap</a> 进行锐捷认证。我没用过这个，故不作太多介绍。</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>路由器</category>
      </categories>
      <tags>
        <tag>锐捷</tag>
      </tags>
  </entry>
  <entry>
    <title>路由器</title>
    <url>/posts/5799c0b3.html</url>
    <content><![CDATA[<p>此为本人用过的路由器部分资源，写出来方便以后需要。</p><a id="more"></a><h2 id="斐讯-k2t"><a href="#斐讯-k2t" class="headerlink" title="斐讯 k2t"></a>斐讯 k2t</h2><p>官方/官改固件锁定了 u-boot 分区，所以无法在官方/官改固件下刷入 breed，如若确实想用官改，建议先刷入 breed 后再刷回官改。</p><h3 id="刷入-breed-方法"><a href="#刷入-breed-方法" class="headerlink" title="刷入 breed 方法"></a>刷入 breed 方法</h3><ol><li><p>刷入 ptpt52 的解锁 u-boot openwrt 固件</p><p>特制固件下载地址：<a href="https://router-sh.ptpt52.com/rom/openwrt-k2t-initramfs-factory-uboot-unlock.bin" target="_blank" rel="external nofollow noopener noreferrer">openwrt-k2t-initramfs-factory-uboot-unlock.bin</a><br>解锁 uboot，只用做刷机过渡版本（过渡版本无线不工作，正式版才有无线），不能作为正式使用。</p></li><li><p>开启 telnet，已经开启请忽略这一步，已经刷其他，只要能登录 ssh 或者 telnet 都可以，开启 telnet 参考下面。</p></li><li><p>把 openwrt-k2t-initramfs-factory-uboot-unlock.bin 上传到 /tmp/ 目录下，telnet 或者 ssh 登录后台，执行命令 <code>mtd -r write /tmp/openwrt-k2t-initramfs-factory-uboot-unlock.bin firmware</code> 刷入特制版本固件。</p></li></ol><p>已经是 OpenWrt/LEDE 系统，natcap 系统，直接界面升级就好了，不需要刷，请直接下载另外一个固件，到界面升级就可以：<a href="https://router-sh.ptpt52.com/rom/openwrt-k2t-uboot-unlock.bin" target="_blank" rel="external nofollow noopener noreferrer">openwrt-k2t-uboot-unlock.bin</a></p><p>下载的文件校验 MD5：<br><code>fcbab4d79152aa4de38ee0bdd436883d</code> openwrt-k2t-initramfs-factory-uboot-unlock.bin (解锁 uboot，临时使用，不完整)<br><code>062173c2f254aa425b5649744ca0c92a</code> openwrt-k2t-uboot-unlock.bin (完整固件，解锁 uboot，用于 OpenWrt 界面升级的操作)</p><ol><li><p>进入 openwrt 界面 系统-管理权，开启 ssh 刷入特制版本的 OpenWrt 后，登录界面 <a href="http://192.168.15.1/" target="_blank" rel="external nofollow noopener noreferrer">http://192.168.15.1/</a> 进入 系统-管理权 页面，开启 ssh 登录账号密码 root/admin</p></li><li><p>下载 <a href="https://breed.hackpascal.net/breed-qca9563-phicomm-k2t.bin" target="_blank" rel="external nofollow noopener noreferrer">breed</a>，上传到 /tmp 目录 (注意对比 md5 ，特别是使用多线程下载器的)</p></li><li><p>执行命令 <code>mtd write /tmp/breed-qca9563-phicomm-k2t.bin u-boot</code> 刷入 breed。breed 进入方法为开机时长按 rest 键，直至指示灯闪动，电脑使用网线插 lan 口访问 192.168.1.1 即可进入。在 breed 中可进行固件升级，备份，超频等。</p></li></ol><p>也可参考此<a href="http://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=322841&amp;extra=page%3D2%26filter%3Dtypeid%26typeid%3D19" target="_blank" rel="external nofollow noopener noreferrer">教程</a></p><h3 id="官改固件"><a href="#官改固件" class="headerlink" title="官改固件"></a><a href="http://www.right.com.cn/forum/thread-321512-1-1.html" target="_blank" rel="external nofollow noopener noreferrer">官改固件</a></h3><ul><li><p>功能：官方固件去掉部分可以程序，添加 adbyby、koolproxy、S-S/S-S-R、KMS、WOL等功能。SSH（缺省用户名：root，密码 admin），telnet 控制。</p></li><li><p>特点：使用官方驱动，信号比第三方好；</p></li><li><p>缺点：功能少，虽然可以使用 opkg 安装软件包，但得自己修改添加 web 开关。</p></li><li><p><a href="http://www.right.com.cn/forum/thread-321483-1-1.html" target="_blank" rel="external nofollow noopener noreferrer">开启 telnet 方法</a>(2018.06.13 官方升级到 V22.23.1.158 后, 本工具不支持!)</p></li><li><p>刷入方法：</p><ul><li>1、先用上面的工具打开 K2T 的 telnet</li><li>2、用 windows cmd 下的 telnet (默认关闭，需自行开启) 或 putty 连接 K2T。</li><li>3、使 K2T 处于联网状态，在 telnet 中输入如下命令刷入官改版本<br><code>wget http://woo.iytc.net/tools/k2tnew.sh -O - |sh</code><br>（ps:官方/官改固件设置 mentohust 不方便，不推荐在校内做一级路由使用）</li></ul></li><li><p><a href="http://iytc.net/wordpress/?p=3579" target="_blank" rel="external nofollow noopener noreferrer">救砖方法</a>（需要 TTL 转 USB 工具，需拆机，要求一定动手能力。）</p></li></ul><h3 id="Openwrt-LEDE"><a href="#Openwrt-LEDE" class="headerlink" title="Openwrt/LEDE"></a>Openwrt/LEDE</h3><p>Openwrt/LEDE 不用多说，市面上几乎所有固件都是基于其进行的二次开发，得益于开源，有很多使用教程以及软件包。<br>（刷入 openwrt 需先刷 breed。)</p><ul><li><a href="http://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=322475&amp;typeid=19" target="_blank" rel="external nofollow noopener noreferrer">ptpt52 Openwrt/LEDE</a></li><li><a href="http://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=325321&amp;page=1" target="_blank" rel="external nofollow noopener noreferrer">lean Openwrt</a></li></ul><h3 id="Gargoyle-石像鬼"><a href="#Gargoyle-石像鬼" class="headerlink" title="Gargoyle(石像鬼)"></a>Gargoyle(石像鬼)</h3><p>链接: <a href="https://pan.baidu.com/s/1Et-VEY3kg8GW9jzNno3vbQ" target="_blank" rel="external nofollow noopener noreferrer">https://pan.baidu.com/s/1Et-VEY3kg8GW9jzNno3vbQ</a> 提取码: <code>fm3k</code><br>此为 lean 发布，暂未开源。石像鬼固件最有特色的便是其自带的 QOS。含 adbyby，openvpn。<br>缺点：安装软件包比较麻烦。</p><h2 id="斐讯K2-PSG1218-64M"><a href="#斐讯K2-PSG1218-64M" class="headerlink" title="斐讯K2(PSG1218-64M)"></a>斐讯K2(PSG1218-64M)</h2><p>Pandavan：<br><a href="https://p4davan.80x86.io/download/" target="_blank" rel="external nofollow noopener noreferrer">荒野无灯</a> <a href="http://www.right.com.cn/forum/thread-187654-1-1.html" target="_blank" rel="external nofollow noopener noreferrer">更新日志</a><br><a href="https://opt.cn2qq.com/padavan" target="_blank" rel="external nofollow noopener noreferrer">hiboyhiboyhiboy</a> <a href="http://www.right.com.cn/forum/thread-161324-1-1.html" target="_blank" rel="external nofollow noopener noreferrer">更新日志</a><br><a href="http://iytc.net/wordpress/?p=1624" target="_blank" rel="external nofollow noopener noreferrer">K2 刷入breed</a><br>另外还有官改固件，但本人觉得最好用的还是 padavan 故未列出。有需要的可自行去恩山查找。</p><h2 id="品胜云座充-ar9331-pinsen"><a href="#品胜云座充-ar9331-pinsen" class="headerlink" title="品胜云座充(ar9331-pinsen)"></a>品胜云座充(ar9331-pinsen)</h2><p>可刷 TP-Link wr-703n v1 固件。具体请看此文 <a href="https://virgo-233.coding.me/Pisen.html#more" target="_blank" rel="external nofollow noopener noreferrer">Pisen云座充</a><br><a href="http://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=209145&amp;fromguid=hot&amp;extra=&amp;mobile=2" target="_blank" rel="external nofollow noopener noreferrer">购买地址</a>，裸板，18一块。<br><a href="http://bbs.mydigit.cn/read.php?tid=1031661&amp;ds=1" target="_blank" rel="external nofollow noopener noreferrer">刷 Breed 教程</a><br>hackpascal-Breed：<a href="https://breed.hackpascal.net/" target="_blank" rel="external nofollow noopener noreferrer">作者自建下载服务器</a> &amp;&amp; <a href="https://pan.baidu.com/s/1eRCPsMu" target="_blank" rel="external nofollow noopener noreferrer">百度云</a> 密码：3if1 解压密码：baiduqusi<br><a href="http://www.right.com.cn/forum/thread-161906-1-1.html" target="_blank" rel="external nofollow noopener noreferrer">更新日志</a></p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>路由器</category>
      </categories>
  </entry>
  <entry>
    <title>HUT-Email 登录及部分 EDU 邮箱可用福利</title>
    <url>/posts/ffffffff.html</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="Hey, password is required here.">
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="d5ef17621ea2116d2f1be83435447a19919b2c1d649e8c73a8bb3b7697ea3ca5">18e5442f2939cecd82e1f1f4ce029ea27506561013b00db36b1de6b496e42b681a33aae78d1934fd13dd7d5c107eaedfaf336853a63a9fa4e8d11102b932f8ee735218d71e267ba66d18c8b3572c8ae41487b396fbf517ee4531208e8e2f70a395c141a8f68bef0818b4379619eb20d3599e16213fc11b6039f768faf073cfeab0fe4af2b8b22ef139cea3477e59b6efb19ad52fde20256e784941fdd85cf483b9889df15e073ed0dc4da40e2b70ebaa4b9344fed528b1e5707f678c5eb4a343626525d7bd9ab32018ef945543e1ad856228a09608074edc4de6997d573439162a4879f6148c2df5383e8c6a527df84db276d4c06c2ae99663b354bc43a9105edca010001b0e47b8f20ae13e0ab5ed82cedf1dfd720b5707544a98c37982c300a99e82c451d6ec744f54c304b129db168a03acac0f10775c621e2f689cbb40058c574772b23cf932263f537d503768850fe7082a251d71cfb3d0465a29462a34d1f683304d5550f9db9e84998afc2a09988059937220be913a2cae7a7c288edb5f71259399b0db34776e74f8a276f8d1f698c00ed0d285f479da503f9a24bc6d25ae9f97c19fe36401cc6b1cf61ece302586918ed768af138773e52da1f84206186a5f91b1b963b60252afb0b915d98e09f9933943e70b887f903ae17f84f593e5f2f100011643185dcd33bad4d0070aed3ff1474096bcb7744412b69103cac2149d1bc196682376949af6ca943d1e4663dd1886dc5b4053dfce697d73c151ac14c09ce7646c39c2185600d5f605216124e94a86e8dd7bab01ed1528a923a213a60250fef5c148eedfa8bd30184deedbe645a46f3843c802edff0304a793cc06fca17a941d52877492a8bbbe73e8fa7dfbc7d1d9d062e147ef4c14ece447caf58c6c7975fde63c4dbbfe1cc19a29e575c64cb47b9499eaff36aa09987952a10120806414c3009f6549dbb8fce4ace4d645216d922f2a18309b0f76498733116ee982c8c27bd528c46eb226c62199814782b2966a7d679fe382cff961541c55c410f871dd72784f93495950d5dab106c61b75ac45c81661a01a9b771d64a7237538ff8d625d11265b76580072cfa3ddab7afbf347eb65772b01581886f13aa3e4c31ba83103b0793c257615159cb801dc6674f83a157efe5548586dc5d1f4bf450448b3b5547ec4392b9375e78059299ec2fd1ed2cd30bfa80e5445028cd73aa2a08ed735cd74227208e3e51b0a85437d8c3df91d56c3271bb5063654702db30de4ce6731505767261c32a53e312b813e02273f4a148b0138c27ba90c970c400bb55de6820d6db381c4f2437c01737238cd0a2de99d1c62d688c1d43bd899c8e00477ef873ec11a14229ebabfd70b64dedd0691b8bcb8304e7afd34afc3f9fedbde88f6618744e134f6b4f391469f41f180a206b8c7b2450ba865d7c7396cff717817219935ab5dfa0bf02a4873dd530d4962ab634e742a97d248a349aa1cae5098e0b341c97c458483520d6a7897bc80691f58a415e238f802b648a51b1cd3ec73621bfb2a41fd3013f2c4973aa1d2bea49a1301129f8334c34f3822afe39cd4ae250e98334ba6fb70f195d3e3ad27ede6dca9435028909399dfde0cd556aa31d0aed24bdaee5a3fde9b73b5214fea24226ed64e6be810afa09a2b050b484baf59a2f87a5c5f2f896b81ed3b426c58ace6851586a9c006fe8721f200554e5bc5a743e7fdf9bf07fd7456c8650468d382427defad641908212bca8a47aecb11b445936976dabd99a21f14d2e428d8fa4262d71175d24d9aa6e6eccfbcf5521c95b0199dc4687fbe3e4c1b00791bb10fe9680e0e75f27319752f0c1c8a3bd2c0ce04755805bbfb3a14d408120e0118e64cf9935ee8ace49e9ea84adb5d84c6b080e0f3fd0b9dd1438786d4d0e8d9e815bebb9762026ce09eb4190be7a463385544132f4cb046a6664d1c59a33df624d518bc46f804df80dad83c99b8bffabb45f2a765a103af58fda98137c8e8b6f6d5e53b8a57e5c0ac7493e93e38c4bd085592d02679bb3db15ce40efba0a63e6a26fe8fdc511223e9e2cd61e2bba3d216a45d95ee26d22924c9ae3a2f28e608ac2f1371d8786f41ce19d3fc3d252e9bff0b066e5b275a81ff4dd56b3b474372e72fa50003be42f908c36c29f630895012da06a1893faa3bcf6fad3759ef6d0eb9f93583317137960651d1db20623671f25e1b68018856aec6244fd2c8d300cc54c178f06520497aa349f0aa6db1619510f02c4db4d6c0c5c5bcd7a7e4f444cb798575b9022c5fceff12b21d45a3942433475458b45dcecfefee7ebd06d22a30ea2d1b8dcb536d7744feef28f02b4bf0c79dd0cef0f5d8de27a5a94945e1897d1e84bdcbae57b63e3eac7f509799255f05bd2c8862d8dba8ec36bdb5d2858e2a9192d2cd0d173c529c1c75d198ea68473df8547abb3bb3ffe83baf3842058e9e294927fe5a81c8a9736a01bb63848f136083ebe967ad4f1e2a9515c82e64f7bdd8f914a1c32a294349b3f3fa196f2cd0ae2d6c91730dacd7f0c6956beb65ca454ef0e831c571162512eb572eb2feadcdc5cfcef5857faebe2edcd86267fc9c8c18ac504e57d4d79824b8b30c01e03834388a1cd70fd321fd9a3bb2e5af96c47e9b3b717a42055604821d8b81dcf4edc8d8a4a251008a3cef8ec72d344e9f2c27f0ad8c0140637d956bf985132948c489040e9ec016abf50e46c86b873015d1ebc5fbc0bcb408a12c4bf0f5a04c22c735f0a8dc5795d1a63058451136162b50cd391900da4bafcc5b124b5d642a0e93ffa84d013385e343b7be07fe8efd8564b9f7880c932aac4a22aef4f99dc605e72a75cfab5c4347c90de5a44f5110ec73f1c77c4e934c31e10099c476973c53b6e57bf92fd7efae6d24dea633ad97785a8334cf52589620640a6f3330aa65bd13336ae6dbc5f6d449b1398250e350b01f7fecf60a278cee8c962f239c70b6222e7641db2f9d2854895465cb924cc7f2e7fbf5a16778783ff24b20cc104e683f652886113408cba45933647d435c5823e73dca717e36b8cedcdc27429c63a37fdf0e19c2b821eb505b2d085b9e6897d0db19420226a6797735cab012165e4e8cc3632bd282c33923a386f17d3b90fc9ef78cbe836a3ff2e3003cda7db7c6040d8ad3316d0a9ed733f6d8dcf1b57f7756ff1b47008e1acff1a9d7c253229e9744e2e6fefc5dc835002f3735389ab35113aef3bf054f16bc46b6a9aa332848d473b243befca022f6b610eb5da9b13172d5b830036587f369294f8d7248658323204eb5f15e866ae97657b6161f2a5b0a931f34fed1b662b5bebcbfac9345a42164e54a22979742730c6539f45b5e491e81964baeccdac9a2dc203b07a6bc37cc5ba192282b49c98da7201bdab8bbd39559b2575940b2fe2ca69746e907595282c643fcfe8ebf122f753d096bb11309731dd34e992610d8f27003b411e3609821a66f4559071bda30d0f223583f11f3682132d638514947c402051690f49b95467ba2c4dc81c52b8a5e9007d9404d1ba6ae9f91ee993b51b049dbd64fd01809b8a22c40379775ef26b664d4a72923abed81b5ffe9c6ae47737b9800707090325445a84e2173c5dc5e156c5d4bbeb02808fab8d8fbd18b00ec5e3f7f40c967e146f1f20930a7513a463fb97d0baae62199ff399e83c88b7718d497479350cbdb4b7ec51812c74538e49c795c56794bb16da12397a6d2dab090082b49114dc77b73e004857f3b71163979fe200b18b3823438b6f8539df39c1b300469c0994a1c7452879497e000e86105800ef34160cc781a2de37b1feea3dca3db0d962f8579506585af264bc12de0291997c2a85084125fb974541b234ea88f7c864d89976b0331b19874d5a8b5f6122181503e99346933a9ea862ee3818f2554470a3890869c461ee4275d6c036137975fd29719c65d20ff18982da1fec8926c7bf4904b3a0df21ab9a82e892155f270540b03efedbc913d6a9653a7a4715b93e749e6fe84886057feb51eb01a0172dbd542fdf67df678f878ce4ad3d8ab8fa94fe674f20b88d3c9c543788a6467e39958ae95871f12271d664cc9c16063c08e4ef888ae58f18749dad45a257ed8eb94b4143f007f12d9876f3d59b23700a27e769ca22a2812f52d1036216e6bc2ecb78a773cfd5058b8fb698149d5c5ad0402a99ed23f3764aaa37a1e12b3958f131ec74e5574e56464e36ba800db771ae8f71828ed10735197f9141138c789ccc3e10934803c35f31d4aa91359c4381105e07b4ce091445655f2eebf42393328f462349792acc00951a22898582ecdc86b7caef00fc0d7a0257d6ac5970a4bc53679134e15577d65b35c116c667e3b96b81d63bdce57cae9d9a14a8c70558e5a26128b56b50a175c8c993c785f8d762a6d7fa968ca28db2c1026f8ad1433bfef5593241feaa99fddc8df09251c4a22112f9ce651a9126bdea0664b7515e59b8c9da7df86ac2a365f29fc96515ccf6edb03aef3829bd7af063e52b625b1514529d805d5b0621e2316c60f8054c3e94d83059ac66a720f547c33588deaa4e1593565a35fae721cd83a3255f3e197f4392df58bd4ab7da5f9ac543569519f5dbc962aa47b90c485fd440b369625e070512924330e5c76561e492ec4c675d40d89bd1d37296f6bda384b2ede821950f29157ca37410fd474afed9ed407799af147c7944cdf1720cfcc40632df98164a491ac8595cca991d248b4c481a0a5a1abbe8c044f8113a5c3b8a2e45e04bc6d31d0341a305198d4d89ee7bf265a66659180d7964f59986c43c02c3c144b816f1cde499fc5abf818ad8501b825617fe225eeb2ec6dc53f889f6dc6fe6304efe4eb201eff0b6ce700f57b6bdd571bc1497054ec796eb52afa0607c3b33d5aa0bfe5f943e0783c4ee2357da1265127e631beda7f3f0ac6416b9f43e31820cc0eab01298e589de0186b7cec5248f15e0c942e0cb755b8563349b2f4100f14e7c672bc912c1065325bce049618da0a78b5fd8021dbc06c9291a2cc411fdb56708227c17808640198b3655b3829a4241c27a7138c9d73d80b35b824f8c0ad9e95b48e48dc854af152c9ba392469318992fd718bb53589c4d9a26269680e5fde7f7076ea6e05a73e6cd1906dd181352912f240540978299dc7eedc1842cb492c67836f3503000e0d925c785e915d0a93eaae81d895e490d4344f4a779c2e53956e8cafbb9cac33e6d36699320990536d5f23c31f448d04323d0b9a49edcbd9d95d237a0c1370ce1700ca0ab140b4601ced66b62baa3e016ca270aac1917e288ef84ff48a96cf21656aa926d0e82f8a4263b0b765c3d694a7566a8ea572a02f3ab6853394c2a9c3681ad46d25dd92c6357197c5e1fa64d6a98ef89d6e135cdb766435f42301e303436f99d3af1d85ae9566824187f353cb41fd64c0c99e3c7d017db0a2ed736b1996a39c6f7349399a5a321ace60b666169e229528b4d7b439cb11de830347b2091db7c83da9cca3e46fef6c0fca16defe913180ee5eb826714d731d84866bf2de030d38c08875346e2700875d155e4ec3fc48be78244d6a23c7fd3abbd09a1f2e076d5ab2a66e39cc8498a195519facae8145117abc6e60d1095aca7945125091f13b5c3236813e9eb56074ccb22100fafbe2499aab373c44eb4f1c3c305a74fa75207c68c5e53aa83aea636a510ca3a1db6014bfcdc39d1735148bcc1cb6179bd5e9bd1ad2dd4a7813d2efa1c6daa96dd59e21c85238b0e8c2f0d50f140aac362e9379e73f594893e4e91bdfb25316c712be06179d235809d50e9d2249123642de1eef729674b4f68e0432f71d534524cfc8c126953c0c8d1e675557ce5ef1269a3812264e37fd6ba774d02515fced7bcbcfe19986dd6c9ae5c9201d8306247d57b02eab83c79e575d3eebac8ac663ccf563b12b6850bf4f364283ae9deaa9161d62fa93d6b7d35e732c83e58b09b26fc043f861006a892fd29e1bd0417261c339408619ea0c2e180959da9bf9614103959b05dd6d9cbf1910f91d660f2b3f9d717e03b82c092873cb3759f9f08e6af69cb663a3e4c5a9209775a55c819f583f5e7ffdf67d24869c90a7928cf3b46162a469bd550bd1b891d32d774f00ec89b7e093327901b1276c01c393fc6ff30562a44f3ac375efac231f09570fbc60f79488bcf78b65970b61555af77e8d4623795b510b0eaa0a507945a030c3feb4d2f6eb32e56845ba80c41f0e82c91585397e4b32f499bfc6bb88ce397a4203d5e110f6b2abe8d437fbc8511fbd21e808ae99d320db03c2bac05523bc2fbe81388568a15d0b254015b7712ff5af1cc2821e89b2afc3e963e9104d8328b7e94a104f5e284f11cf9f731a087247c253b28549c14d005782a80873c0d33ae37c50cfd28122e16d8d39d06050aad9619ea3340efbda7ece095a069a9ca012ecbd54a5266749da79bda6b3408d5e9111832fd87c9ba4ca581e80d2ae26b64e534c7cc4e36d3ab329a96d65b89ebda27f6533a6145044790364584a8cbbce354d41c566f17e7d659e2e18968a1ca4653f9d5fcaa7ed2255e1fe37e726bd440480b984ec7af380a7e1b43e9744568ea94d8f2f7ef1341567948dd6d882b5ea8f29d417568ae84996131631cf4f46f88a2d31b3cb0b81e620e5a0fbb953d0e7fb16ecc601f6c036c819f6ad0a98944a1ec05532793d3fd3bbc78d2c0474d8a76c18cc7c227b1a3f443f88267787ae1d7ef34b25b927920216bc43cd107b8d775127f5292a98fb8750d6addf161b23f853303d38231f7f9d9e7a9082a016fba2c49fc15e2e9efd1d4cf4852cc7665cf8bdd9beeb471808ef4073863f124fed4226f08e92de2d9a5f222a4891f0c5a44b8ef0ecf0e102577d3423bfb3576a1e656227b5285ddceb8ced6d013177eeeb4c05e5c61ad208d00600998560a2e830066acb045e39227a942f925d27f59fcd2ba9113d825509d5b75c7fbbc3bac2435a992681abf65c3d6764a5aa3a8037d2cae50f48a7e55f1a1a31ee1c236c51c2330524816fef469948704e6cc3e56dfd451c3781b11f1a5183c9e563f0cff1d21f23eb8942ed0de1efca705f53a94be0576ff8826de0353f14e152bcfa662f99daa364fefe0fe8e30563e385e57bac6456f002dc9548ab71ed6532fc6c6e8567a908dd641f6cbba21296e001eb41ae75442f734f8a587dcf8499120a4caccce1af9a0e5cbccfd8625bf2ec0ac7d24ff88f592ec476c4d33045c6bfde19e9324a2ef8b0f019762776afc0c24718f508bed87214401ad870ecf84fcdf81e164b7ddb094fb1f363b50f5812a1531741946df2a26354d24b3379f3148b1526c5c24fd64b8f107cdf253d2597cf32bf666e59c1b05aaee516f768e185a1f5a0c23f0c75eac2ed8fdce04ccf3e4f9cfaba67dadaf5fa8fdb823e954a8211185395702869b2d26a953564053065505c453829e42da18a726da85b867ee62b1f164ce004d876b0c764a3ab01bc1f3c910b8da1e21852e0601f47769721f1190703cc9178803e8efaff9e9de184014a682fcc74d3b4a2a4315d23130adb6fa7f730a22f788cb6574d8ffedab0e0bc0be4b91377d8ec86cd0c6671684f070d743c7626e5bfdf95900c7be0273a54b7ee3f3e58fb3fadd91994b0</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css"><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>HUT</tag>
      </tags>
  </entry>
  <entry>
    <title>路由器使用百度云远程下载</title>
    <url>/posts/cfb7bd2a.html</url>
    <content><![CDATA[<p><img alt="BaiduDesk" data-src="https://i.loli.net/2019/06/08/5cfb5d6d5fab581544.jpg"></p><a id="more"></a><div class="note info"><p>BaiduPCS-Go 已被百度关注，原作者也准备停止维护了（<a href="https://github.com/iikira/BaiduPCS-Go/issues/643" target="_blank" rel="external nofollow noopener noreferrer">[作者] BaiduPCS-Go 已进入最后的维护阶段，有些话想对你们说 </a>）。目前使用下面方法仍可高速下载，并且不黑号。<a href="https://i.loli.net/2019/02/25/5c73bf0556fdd.png" target="_blank" rel="external nofollow noopener noreferrer"><img alt="Screenshot_20190225_180815.png" data-src="https://i.loli.net/2019/02/25/5c73bf0556fdd.png"></a>图中链接：<a href="http://pcs.baidu.com/rest/2.0/pcs/file?app_id=265486&amp;method=list&amp;path=%2F" target="_blank" rel="external nofollow noopener noreferrer">http://pcs.baidu.com/rest/2.0/pcs/file?app_id=265486&amp;method=list&amp;path=%2F</a><br>快捷脚本见文末</p></div><p>在酷安看见 <a href="https://github.com/iikira/BaiduPCS-Go" target="_blank" rel="external nofollow noopener noreferrer">BaiduPCS-Go</a> (一个命令行界面的百度网盘客户端）,当时只是在手机上体验了下就删掉了。不久前弄了个工控板，第一次接触这个，以为能实现 路由器+NAS+小主机 结果 CPU 不支持虚拟化，虽然也能使用虚拟机，但只能使用 32 位系统，性能损失太大。就只装了一个 OpenWrt。这样配置就有点太奢侈了，95% 以上的性能都处于闲置状态，至少对于校园宽带环境的我来说太奢侈。对群晖的功能有点眼馋，所以想着能不能在 OpenWrt 上实现部分群晖的功能。比如远程下载，私有云存储等。经过一番折腾使用 Frp+BaiduPCS-Go+smaba 也算勉强实现了。</p><ul><li>Frp：一款开源的内网穿透工具，选它的主要原因是配置简单，有很多免费分享的服务器。</li><li>BaiduPCS-Go：仿 Linux shell 文件处理命令的百度网盘命令行客户端.今天的主角就是它了。</li><li>smaba： 用来进行文件共享。也可使用其他同类软件。</li></ul><p>BaiduPCS-Go 使用方法很简单，作者提供了编译好的二进制文件，直接去 <a href="https://github.com/iikira/BaiduPCS-Go/releases" target="_blank" rel="external nofollow noopener noreferrer">realease</a> 页面下载对应架构文件就行。下载后解压，将 BaiduPCS-Go 复制到任意文件夹下即可。使用时须进行登录。</p><ul><li><p>常规登录百度帐号<br>支持在线验证绑定的手机号或邮箱,命令：<br><code>BaiduPCS-Go login</code></p></li><li><p>使用百度 BDUSS 来登录百度帐号<br><a href="https://github.com/iikira/BaiduPCS-Go/wiki/%E5%85%B3%E4%BA%8E-%E8%8E%B7%E5%8F%96%E7%99%BE%E5%BA%A6-BDUSS" target="_blank" rel="external nofollow noopener noreferrer">关于 获取百度 BDUSS</a> ，命令：<br><code>BaiduPCS-Go login -bduss=&lt;BDUSS&gt;</code></p></li></ul><p>可使用 <code>BaiduPCS-Go -h</code> 查看帮助。<br>目前 BaiduPCS-Go 支持 多线程下载，上传，离线下载等功能，这里我只介绍下下载，更多使用方法可以查看项目 Readme 文档。</p><p>使用 ssh 连接路由器，切换到存放 BaiduPCS-Go 的目录，我为了方便使用将文件重命名为 B ，如果是手动下载上传到路由器的还得注意文件权限，如果运行时出现 permission dead 就是无权限，可运行 <code>chmod 0777 ./B</code> 也可在 winscp 里更改。首次运行需要登录才能使用，登录后可先输入 <code>h</code> 查看帮助<br><img alt="ssh" data-src="https://i.loli.net/2019/06/08/5cfb5d704fd6651176.jpg"><br>其他的一些文件处理命令与 linux 一样，如 mv 是移动，cp 是复制，ls 列出当前目录等等。<br>下载文件或目录<br><code>BaiduPCS-Go download &lt;网盘文件或目录的路径1&gt; &lt;文件或目录2&gt; &lt;文件或目录3&gt; ... BaiduPCS-Go d &lt;网盘文件或目录的路径1&gt; &lt;文件或目录2&gt; &lt;文件或目录3&gt; ...</code></p><p>可选参数</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">--<span class="built_in">test</span>          测试下载, 此操作不会保存文件到本地</span><br><span class="line">--ow            overwrite, 覆盖已存在的文件</span><br><span class="line">--status        输出所有线程的工作状态</span><br><span class="line">--save          将下载的文件直接保存到当前工作目录</span><br><span class="line">--saveto value  将下载的文件直接保存到指定的目录</span><br><span class="line">-x              为文件加上执行权限, (windows系统无效)</span><br><span class="line">--share         以分享文件的方式获取下载链接来下载</span><br><span class="line">--locate        以获取直链的方式来下载</span><br><span class="line">-p value        指定下载线程数</span><br></pre></td></tr></tbody></table></figure><p>支持多个文件或目录的下载.<br>下载的文件默认保存到 程序所在目录 的 download/ 目录, 支持设置指定目录, 重名的文件会自动跳过!<br>使用 <code>./B config set -savedir /mnt/sdb1</code>可设置下载目录。这样就可以下载了。我用的是默认的 100 线程，下载速度还可以，如果闲速度不满意可适当提高线程数.</p><details><summary>点击显示图片</summary><p><img alt="BaiduPCS-Go" data-src="https://i.loli.net/2019/06/08/5cfb5d73e805571236.jpg"></p></details><p>当然高线程也会吃更多配置。<br>下载完可直接使用 smaba 共享，使用 fooview 进行播放。</p><details><summary>点击显示图片</summary><p><img alt="foooview" data-src="https://i.loli.net/2019/06/08/5cfb5d744ee9883146.jpg"></p></details><p>搭配 frp 将 smaba ，ssh 穿透到外网即可实现远程下载。</p><div class="note danger"><p>注意：将路由器 ssh 及 smaba 暴露到外网有一定风险</p></div><p>快捷脚本：</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#/system/bin/sh</span></span><br><span class="line">BaiduPCS-Go config <span class="built_in">set</span> -appid=266719 &amp;&gt;/dev/null</span><br><span class="line">BaiduPCS-Go cp <span class="variable">$1</span> /apps/baidu_shurufa &amp;&gt;/dev/null</span><br><span class="line">BaiduPCS-Go config <span class="built_in">set</span> -appid=265486 &amp;&gt;/dev/null</span><br><span class="line">BaiduPCS-Go d /apps/baidu_shurufa/*</span><br><span class="line">BaiduPCS-Go rm /adds/baidu_shurufa/* &amp;&gt;/dev/null</span><br><span class="line">BaiduPCS-Go config <span class="built_in">set</span> -appid=266719 &amp;&gt;/dev/null</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>路由器</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>KMS</title>
    <url>/posts/343b8a35.html</url>
    <content><![CDATA[<p><img alt="KMS" data-src="https://i.loli.net/2019/06/08/5cfb5cd807c3728109.jpg"></p><a id="more"></a><p>路由器上搭建了一个 KMS 服务器，测试了下可以使用。我本人用的数字许可证激活的，不需要 KMS 但弄都弄好了，就发出来算了。算是留个备份。(服务器是搭建在寝室路由器上的，并未进行穿透，因而只能在学校内使用。只要学校网络不出问题，应该都能正常使用，可用 ping 命令测试，如果连不上可能正在重启或是更新固件) ps:因学校网络原因 IP 可能会变化。</p><p>注意：仅 Windows Vista 及以上系统可以使用 KMS 激活，且 Windows7 旗舰版 不支持 KMS 激活。<br>KMS 激活也需要密钥，且不同版本对应不同密钥。不过这个密钥可以在微软官网找到。<br>此处以 windows 10 专业版为例，其密钥为：W269N-WFGWX-YVC9B-4J6C9-T83GX<br>其他版本也可在微软官网找到。</p><p>Windows KMS 密钥 <a href="https://technet.microsoft.com/en-us/library/jj612867(v=ws.11).aspx" target="_blank" rel="external nofollow noopener noreferrer">https://technet.microsoft.com/en-us/library/jj612867(v=ws.11).aspx</a><br>Office KMS 密钥 <a href="https://technet.microsoft.com/en-us/library/dn385360(v=office.16).aspx" target="_blank" rel="external nofollow noopener noreferrer">https://technet.microsoft.com/en-us/library/dn385360(v=office.16).aspx</a><br>Windows10 2019 LTSC 密钥：<code>M7XTQ-FN8P6-TTKYV-9D4CC-J462D</code></p><ul><li>激活 windows 10 专业版<br>右键开始菜单，点击命令提示符（管理员）或者 Windows PowerShell （管理员)<br>输入 <code>slmgr /upk</code> 卸载原有密钥，如果是刚装好的系统，这一步可以省略。<br>输入 <code>slmgr /skms 172.30.192.89</code> 设置 KMS 服务器地址。<br>输入 <code>slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX</code> 安装 KMS 密钥<br>输入 <code>slmgr /ato</code> 查看激活状态，如果显示 “成功地激活了产品”，表示激活成功，<br>每隔 180 天会自动续订，不需要担心激活过期。<br><img alt="Windows_KMS" data-src="https://i.loli.net/2019/06/08/5cfb5cfb264eb24023.jpg"></li><li>激活 Office 2016<br>右键开始菜单，点击命令提示符（管理员）或者 Windows PowerShell （管理员)<br>输入 <code>cd "C:\Program Files (x86)\Microsoft Office\Office16"</code> 这个是 Office 激活脚本所在位置，不同的 Office 版本不一样，比如 Office 2013 是 <code>cd "C:\Program Files (x86)\Microsoft Office\Office15"</code>。<br>输入 <code>cscript ospp.vbs /sethst:172.30.192.89</code> 将激活服务器地址设为 172.30.192.89。<br>输入 <code>cscript ospp.vbs /act</code> 激活 office。</li></ul><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>路由器</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
        <tag>Office</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Pisen云座充</title>
    <url>/posts/13b1ea83.html</url>
    <content><![CDATA[<div class="note success"><h4 id="2018-6-19-更新：openwrt-固件"><a href="#2018-6-19-更新：openwrt-固件" class="headerlink" title="2018/6/19 更新：openwrt 固件"></a>2018/6/19 更新：openwrt 固件</h4><p>链接: <a href="https://pan.baidu.com/s/1MqWci4ElhyytjqgCj9GnFw" target="_blank" rel="external nofollow noopener noreferrer">https://pan.baidu.com/s/1MqWci4ElhyytjqgCj9GnFw</a> 密码: <code>7ckw</code><br><img alt="op" data-src="https://ws1.sinaimg.cn/large/ec245efdgy1fsguadvf4xj211y0kgmzo.jpg"></p></div><a id="more"></a><p>去年在基安看见的一个<a href="http://www.right.com.cn/forum/forum.php?mod=viewthread&amp;tid=209145&amp;fromguid=hot&amp;extra=&amp;mobile=2" target="_blank" rel="external nofollow noopener noreferrer">帖子</a>，品胜云座充的拆机板，看了下可以刷 open-wrt 以及 Tp-link WR703n 的包还有 usb 接口就入手了三块板子。到手后就全刷了 u-boot 刷了个 open-wrt 后就放抽屉里吃灰了。后面翻出来几次装了 mentohust 能登录学校的锐捷后就又吃灰了。 最近因为在弄主路由 k2 的内网穿透，接触到了 opkg 包管理器，突然想到了吃灰的云座充。回到寝室就刷了 wr703n 的 LEDE。接着就是弄 usb 挂载以及存储空间的扩展。</p><p>ps: LEDE 默认不开启无线网卡，可使用网线连电脑，访问 192.168.1.1 打开无线网卡。若要桥接则要打开 DHCP ，只作 Ap 可不设置，默认静态 ip。</p><ol><li><p><a href="https://wiki.openwrt.org/doc/howto/usb.storage" target="_blank" rel="external nofollow noopener noreferrer">安装 usb 设备支持</a></p><ul><li><code>kmod-usb-storage</code> ——必须。大概是 内核支持USB大容量存储设备？</li><li><code>kmod-fs-&lt;file_system&gt;</code> ——必须。格式化分区的文件系统,包含 kmod-fs-ext4, kmod-fs-hfs, kmod-fs-hfsplus, kmod-fs-msdos, kmod-fs-ntfs, kmod-fs-reiserfs and kmod-fs-xfs.我用的是 ext4 分区的，所以装的 kmod-fs-ext4。</li><li><code>kmod-usb-storage-extras</code> —— 可选。内核支持更多驱动程序，例如SmartMedia读卡器。不知道干嘛的:p.</li><li><code>block-mount</code> ——必需。用于安装和检查块设备（文件系统和交换）和热插拔功能（在设备插入时识别）的脚本。后面的扩展内部存储也要用到。</li><li><code>kmod-scsi-core</code>——Any mass storage is a generic SCSI device.不知道干嘛的，机翻是：任何海量存储都是通用的 SCSI 设备。</li></ul></li><li><p><a href="https://wiki.openwrt.org/doc/uci/fstab" target="_blank" rel="external nofollow noopener noreferrer">配置 fastab</a></p><ul><li>自动创建初始 fstab：<br>ssh 连接路由器 输入<code>block detect &gt; /etc/config/fstab</code>。或者在网页的block-point 项点击自动配置规则。（LEDE 后台管理默认是英文的可以安装 luci-i18n-base-zh-cn 安装完成后就是中文界面了，如果没有可以去设置改成中文）</li><li>修改 fastab：<code>vi /etc/config/fstab</code> 也可在网页进行配置，但某些参数配置不了。</li><li>设置 fastab 开机自启：<code>/etc/init.d/fstab enable</code><br>fastab 还有很多参数，具体可以去 <a href="https://wiki.openwrt.org/doc/uci/fstab" target="_blank" rel="external nofollow noopener noreferrer">Wiki</a> 查看。</li></ul></li><li><p><a href="https://wiki.openwrt.org/doc/howto/extroot" target="_blank" rel="external nofollow noopener noreferrer">扩展内置存储</a>这个可以让路由器从外部存储的镜像启动，我只用了扩展路由的内部空间。</p><ul><li><p>将内置存储 /overlay 的文件复制到 USB 存储中：<br><code>mount /dev/sda1 /mnt ; tar -C /overlay -cvf - . | tar -C /mnt -xf - ; umount /mnt</code></p></li><li><p>使用以下命令创建fstab:</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">block detect &gt; /etc/config/fstab; \</span><br><span class="line">    sed -i s/option$'\t'enabled$'\t'\'0\'/option$'\t'enabled$'\t'\'1\'/ /etc/config/fstab; \</span><br><span class="line">    sed -i s#/mnt/sda1#/overlay# /etc/config/fstab; \</span><br><span class="line">    cat /etc/config/fstab;</span><br></pre></td></tr></tbody></table></figure></li><li><p>最后使用下面命令允许安装大于 /rom 的软件：<br><code>echo option force_space &gt;&gt; /etc/opkg.conf</code> 也可在网页端进行修改。<br>在网页端可以看见 / 分区和 /overlay 变大了，如果 / 分区没变可以插着优盘重启后应会成功挂载。<br>我的是 16g 的内存卡，分了个 128M 的分区出来，可以看到两个分区都正常挂载了，并且成功将 128M 的分区扩展到内部存储。<br><img alt="fstab" data-src="https://i.loli.net/2019/06/08/5cfb5c6be26e029890.jpg"><br>到此品胜云座充的折腾告一段落，接下来就是进行软件方面的设置了。</p></li></ul></li></ol><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>路由器</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello-Hexo</title>
    <url>/posts/59e5d8b8.html</url>
    <content><![CDATA[<p>Hello Hexo！</p><a id="more"></a><p>希望阳光很暖，微风不燥，时光不老，你我都好。</p><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
  </entry>
</search>
